<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="hiveæ•°æ®ç±»å‹ï¼Œè¡¨å’Œåº“çš„å¢åˆ æ”¹æŸ¥ï¼ŒJOIN">
<title>Hiveå…¥é—¨-HQLã€è¡¨æ“ä½œã€åº“æ“ä½œã€è§†å›¾ã€ç´¢å¼•ã€æ•°æ®ç±»å‹</title>

<link rel='canonical' href='/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/'>

<link rel="stylesheet" href="/scss/style.min.0af8e7a36354f8f50b06a82de1425b9b2d8ee44d812d5ba6d0615d71fe31085d.css">
<meta property='og:title' content="Hiveå…¥é—¨-HQLã€è¡¨æ“ä½œã€åº“æ“ä½œã€è§†å›¾ã€ç´¢å¼•ã€æ•°æ®ç±»å‹">
<meta property='og:description' content="hiveæ•°æ®ç±»å‹ï¼Œè¡¨å’Œåº“çš„å¢åˆ æ”¹æŸ¥ï¼ŒJOIN">
<meta property='og:url' content='/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/'>
<meta property='og:site_name' content='é’ç§‹åšå®¢'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Hive' /><meta property='article:tag' content='Hadoop' /><meta property='article:tag' content='æ•°æ®ä»“åº“' /><meta property='article:published_time' content='2024-04-14T21:41:05&#43;00:00'/><meta property='article:modified_time' content='2024-04-14T21:41:05&#43;00:00'/>
<meta name="twitter:title" content="Hiveå…¥é—¨-HQLã€è¡¨æ“ä½œã€åº“æ“ä½œã€è§†å›¾ã€ç´¢å¼•ã€æ•°æ®ç±»å‹">
<meta name="twitter:description" content="hiveæ•°æ®ç±»å‹ï¼Œè¡¨å’Œåº“çš„å¢åˆ æ”¹æŸ¥ï¼ŒJOIN">
    <link rel="shortcut icon" href="/img/favicon.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
        
        <figure class="site-avatar">
            <a href="/zh-cn/">
                
                

                
                
                <img src="/img/avatar_hu_797b86161150c780.png" width="300"
                    height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                
            </a>
            
            <span class="emoji">ğŸ’</span>
            
        </figure>
        
        

        <div class="site-meta">
            <h1 class="site-name"><a href="/zh-cn/">é’ç§‹åšå®¢</a></h1>
            <h2 class="site-description">åšå­¦è€Œç¬ƒè¡Œ,åˆ‡é—®è€Œè¿‘æ€</h2>
        </div>
    </header><ol class="menu-social">
        
        <li>
            <a href='https://github.com/QingQiuGeek' target="_blank" 
                title="GitHub"  rel="me">
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                
            </a>
        </li>
        
        <li>
            <a href='https://blog.csdn.net/qq_73181349' target="_blank" 
                title="CSDN"  rel="me">
                
                
                <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="105px" height="88px" viewBox="0 0 105 88" enable-background="new 0 0 105 88" xml:space="preserve">  <image id="image0" width="105" height="88" x="0" y="0"
    xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABYCAYAAAD2pNkyAAAAIGNIUk0AAHomAACAhAAA+gAAAIDo
AAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADsMAAA7DAcdv
qGQAAAv9SURBVHja7Zp9cFzVdcB/577Vl23FfBmpJrSEEINDnGAZl+x6V2vFslETYsIg2R7CBMJ4
Ok2BUpJCM2kyiiFMIBBIjEMat2GCh8TYVpKZ0CmKv99qJTmMsZvw4fAZSkONP7CNLUvySntP/5Bt
9r3dlXYXhukf9zf2jN5955577zl77se5DxwOh8PhcDgcDofD4XA4HA6Hw+FwOBwOh8PhcDgcDofD
4XA4HA6Hw+FwOByO/5dIOcKqKrpsbtRm7TwRzlfVvxDhCMJeweyQuilb5TF/uNLOJJPJKaqjn8Xq
bEEvBCIKxzA8C/K07/emRUQr1N0oNjPHqlyM6AUgZwARUY2ocBDhVaP88ZyG87Z2dXUNvd+G7uzs
NKmtGz+dVS4DaRTRyarytgj7Mbpj+/a+54uNrSQn2esXTtbhg3cq3Ijwl+OIHheVnwiT7jVd6QPl
GFCzmbuB64BJRQWV1/BYKVL9I9/3RyfSu2DBgrNHTwx9S9HPAReV2J1BRP5TDPf5ft/OchzR2to6
dWTk+Pl1dVNf7u7uPgHQFo9PGyT7DeB64Jxxqu8DWSle1Urf9wdyX0zoJNs+p92KfQj4cMm9VQ4Z
+LLp2v2biUST8egyhdVAfanqBZ5VU7U0lUrtGU+uOR7tAeLlGDowClgzacrUf+ju7j464TgS0W+r
8i3AILyQ6um/dH4ierNV7gWmlNHun70qc9W2bb2/zxlvcbJLZt91suFKGDVi5pv1z/QWH9i8W1Tt
ynH6YQFT5N1R8WRBsV/7woULJ58YGhjgvfNMVc2kK7ds2fJ2MYHm5uhsLLty+y3wuMKXKmzzGIZk
KtW/m3EMQLZ99iOFHSRbQG40Ssyod4kRFovKg8CxkGBE0ZuK6W9JRJtV7Q8IOmhAkB9G8D5VO6n+
bL+nL4KpmgHcBrI/pOJDmtUfF9Nvh4YaChT/FGNuiEhkzqQpU6ee23jeJPGq62okcqERWSawBsiG
6swZyQymFi+OFY10UbkiVGQKOOgt4H5P5ErxmImp+rgR2gT5PkJ4aajHsjaZTEYAIoUaHe2Y/XcK
Xwl15b+NsMys37UjJP4i8KReF/+OzRxfpcJ171pKi64bWeV+wMvRvz+CadmaTr9wukQE4GXg5dbW
1scyJ44/gdKWo2aWqkqhBXfE2AZsoGgwle5fXqQ7fzr5f92CePyeEck+ijLv9Fvl4+8c4m7gHwtX
12mMz6qauilf37Rp0/FQ+R7gt21tbXcNDbzzcMixF4sdWQr8PC+S7JLLPwE8FCp+zmh1UwEHvWvi
X6QPe127vwh8HVCUITHew4VkF8TjFwJ/HaiP3pzroDCbN29+55KZsxajbM6p1Vt0R2Q1GEnKW5TA
lnT6JTHVbQi9wep6S0vLvE8VdBEUdZIgX02l+28t4KDTdHd3H93e03ejQE9Ar+rVUGC6s5pdBdTm
FB30TPXnTdeOQ6UMMrJh931GvE8aqi4163c+V0hmxOjF4bLqOlIT6V69evVI7eT6pQLrBZ4Ur+qG
osYR0xAqKMlJAL7vD3gRuQHI5BR72VG9rUhrhZ0kPO6n+x6iBERE1ZhVuWUKCQg5yS5rugJIhqr/
i6z73eulDhDArN/5nOl6+k9F31vJ2y1lhuS7p+bg8di4ceMhP92/1E/3L/Z9/8/F5KxqY9BeWrKT
ALZt63sV4SeBQtXPd3R0eHnCyrn5GmR/bV39bZSBiL4UKjpXVSXopCx3hhp/0eOjPy2noVI4p7Fx
F3Ak2JTepDbzfDIe+8qiRYvOes+NSHC6U2FfuSo8eCLc9QN79+Zt6aXQmmTkjo0bN5Y0++RoCm/V
R0VETzvJ3tpWg+rfBBviUdmwIVuK+nLo6uoaEuGevBfKDEUfGR48tq85Ht2WjMdub2mJfbSSNkQJ
rUmlT3enaP7Moh3AoaAanZXf7bw16WBDw/QnKBPNj8j9kDvd7dt3BUJdroQRb20lBioFv6f/AZAH
iryOAPMVfTA7oq8k49E/JOOx29vi8Yl2UTnGDDmpzOkOYMWKFRbh5aAh9bzQs5CXSZCfbdiwITNh
AyFENeykfZDjJKsSXIuUN826nf9TbkPlkEr33SGeSYD8djw5hVmKPjhI9o3mePTh1tbY9AmVhyPJ
lB9JY4bjzcAzGmj7qkTiDEJHGYN2V9KWhvos4UgS1b8K9o7dlTRULr7fm06l+9owNAH3I7w0jngt
cEtmWPckE7HlE6gODDiiXkVOUmEwVBQ41A4X2H5XT6qvyHYiwelOw5GkImcGKmj5C+17IZXq351K
99+Z6um/WDxmgvwzkIbQkXSMD6nqvzXHo98rpKu9vb0ubExTYyuNpKkBw4kcyX0e9fKmqMHyNwwn
dRN0kkh4TUIDTkLy0jwfGL7f/8dUuu97qXR/Qrzq8wT5KmMZgTB3JOOx68OFBw4cyEsJRSL1lf7o
zgiaRQ/nPquGIqnEQ3NBQhsHzXcSwXsgYXLFjb2P+L7/lp/ue0i86hkg32QsO50zLr0//3w1Gjgj
oRw+dXVQDp2dnUYhsJtTlWCUWBt0UhmH5gIEI8lKcLoTkb2BzlgmXpw/QHzfH02l++4B7g29apRs
JrDpyUsJiVQURdu3b2oiL5LMM0GpYLah3ENzkODUacKRpFZfC9WIamenKUHzB4p4rMkv5JLcR6v6
nrffAJrVL4aKhqc1NvrBpnlfIunkbBBcciKhSDKYTaGBn6V7nlxYqTELDlpVkvHYA83x6N7meKyz
Eh3G5CdUrUpN0E5UnLfLMdoFwN8HTUJP/tV6ONtQ2Q+idmzaDNyrVY+a0Bb80qt2hhc9q3q3/u2c
qkoa1Y45cdvedI3m5LrmJ+YtV/RrQCPot+cnYteWq9eO6MfCZYIG7mNUJZRtKM9wixfH6jWbWQtU
B9QYWRWWzcsSVJDZABg22fBmR4eNOQC5TlqxwmLyMgBz7SG7WjsnTnye1tyZjGQ7mlZmsT1W9FdW
X/nu6XfovFxZq/r4/ETs6nIGo8LN4bKqWhOYgghHUhk7rtbW2PQjh/Up4NPBN7I1lerL/xxAgtOd
VnhoNjYvJXTo1HccJihY/QjKGyGj3Jh9/ljKLpndPK7xOpMRXTLnC9kXjvYoemtO/dvtrW01Y+OR
34eq1VrVXzUnYmubm5tnjm+81qnJeHRd6NIPQXZv3twb6LOE1iRjzISGa4vHpzXHY9/IDOuewIXf
GMMRzO1FqgacFFFT0SbFhiMyJyEcTGd07RiyS5qusVbTgTyeaNQq/mh70yuCptXwKiqHETUC01SZ
lX3haAwKpewxcnSoDjgxrXH6v+7f9+ZSlNzrZoPqMnRkaTIe+y8V3YHK6wIjCBHQKaoSzwwfjxG8
5zpFoSv0wBZc1V6djEePG2G/EBkelWwNSK2M5eHmoswdJHsZUGhqH8aYxVtT6T+U4qRKD83hgyzK
6c8F8qYxs37XLrv08mutza6F4Gkb0YsULho7qeipf+Miwjp5zD8CY9nvtra2RYMDR58EDUemKDob
ZfbYxS45ygu3IvDU9p7efz95zZ474IbQ8zXANVkFGOWU8hI+4DuGMdemUr2bCr1sbW2dmhk+HnDs
mWdOryyzAeeG+nM6kgpusc26nU8Z5XKQsr47C1kqI8h3pKHhy7nF3d3dR1sWLGwB+RpQ8UeIAr+u
P+Ps9iLX54NlK8znl5HqupnFHASQyWTCv/7DlWS/AVTCKSEpPN3lYrp2vwLMte1Nn7Oi/4SSQPCY
mNdFWSPUrDYbdrxZSGDFihUWeDCZTK7R7MiXBF2uMLME3QBPY8z3/VTv+qJ9h+stchfo5YR2aBNw
CGRtRLxHt/b07JpIuE51YGjs6yLvZMOV3xqoBgJG0I3v/l0i9qZYPQMnElb1MhHOQfXsMQ3ytlp9
GzGvedArG555o1SduSxKJM4/oXopkv2EwgyQelH1VDgicBiVZ00V/du29b1aqs6Ojo7qgwf/d6Yd
sTMU+QgwTeAs0CkqZFCOgBwR9CU1VTtbWlpePPkDKpn5ieiVVlkw5iT5dSrV11/J+JPJ5AXYzHKg
CqXHT/f/RyV6HA6Hw+FwOBwOh8PhcDgcDofD4XA4HA6Hw+FwOBwOh8PhcDgcDofD4XCUyP8BdT6l
KncUIK8AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjUtMDYtMDFUMTc6MjQ6MzQrMDA6MDC/mtbVAAAA
JXRFWHRkYXRlOm1vZGlmeQAyMDI1LTA2LTAxVDE3OjI0OjM0KzAwOjAwzsduaQAAACh0RVh0ZGF0
ZTp0aW1lc3RhbXAAMjAyNS0wNi0wMVQxNzoyNDozNCswMDowMJnST7YAAAAASUVORK5CYII=" />
</svg>

                
            </a>
        </li>
        
    </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/zh-cn/page/about/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/page/archives/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/page/tags/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



                
                <span>æ ‡ç­¾</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/page/links/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>é“¾æ¥</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/page/search/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
                
                
            </ol>
        </li>
    </ol>
</aside>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</a></li>
    <li><a href="#åº“æ“ä½œ">åº“æ“ä½œ</a></li>
    <li><a href="#è¡¨æ“ä½œ">è¡¨æ“ä½œ</a>
      <ol>
        <li>
          <ol>
            <li><a href="#æ•°æ®å¯¼å…¥å¯¼å‡º">æ•°æ®å¯¼å…¥å¯¼å‡º</a></li>
          </ol>
        </li>
        <li><a href="#åˆ›å»ºè¡¨">åˆ›å»ºè¡¨</a>
          <ol>
            <li><a href="#ä¸´æ—¶è¡¨">ä¸´æ—¶è¡¨</a></li>
            <li><a href="#å†…éƒ¨è¡¨">å†…éƒ¨è¡¨</a></li>
            <li><a href="#å¤–éƒ¨è¡¨">å¤–éƒ¨è¡¨</a></li>
            <li><a href="#å†…å¤–éƒ¨è¡¨è½¬æ¢">å†…å¤–éƒ¨è¡¨è½¬æ¢</a></li>
            <li><a href="#åˆ†åŒºè¡¨">åˆ†åŒºè¡¨</a></li>
            <li><a href="#åˆ†æ¡¶è¡¨">åˆ†æ¡¶è¡¨</a></li>
          </ol>
        </li>
        <li><a href="#æŸ¥è¯¢è¡¨">æŸ¥è¯¢è¡¨</a></li>
        <li><a href="#join">JOIN</a></li>
        <li><a href="#ä¿®æ”¹è¡¨">ä¿®æ”¹è¡¨</a></li>
        <li><a href="#åˆ é™¤è¡¨">åˆ é™¤è¡¨</a></li>
        <li><a href="#æ¸…ç©ºè¡¨">æ¸…ç©ºè¡¨</a></li>
        <li><a href="#ç‰¹ä¾‹-update-å’Œ-delete">ç‰¹ä¾‹-update å’Œ deleteÂ </a></li>
      </ol>
    </li>
    <li><a href="#è§†å›¾">è§†å›¾</a>
      <ol>
        <li><a href="#è§†å›¾å¢åˆ æ”¹">è§†å›¾å¢åˆ æ”¹ Â </a></li>
      </ol>
    </li>
    <li><a href="#ç´¢å¼•">ç´¢å¼•</a>
      <ol>
        <li><a href="#ç´¢å¼•åŸç†">ç´¢å¼•åŸç†</a></li>
        <li><a href="#ç´¢å¼•å¢åˆ æ”¹">ç´¢å¼•å¢åˆ æ”¹ Â </a></li>
        <li><a href="#è®¾ç½®è‡ªåŠ¨ä½¿ç”¨ç´¢å¼•">è®¾ç½®è‡ªåŠ¨ä½¿ç”¨ç´¢å¼•</a></li>
        <li><a href="#ç´¢å¼•ç¼ºé™·">Â  ç´¢å¼•ç¼ºé™·</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">


    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">Hiveå…¥é—¨-HQLã€è¡¨æ“ä½œã€åº“æ“ä½œã€è§†å›¾ã€ç´¢å¼•ã€æ•°æ®ç±»å‹</a>
        </h2>

        
        <h3 class="article-subtitle">
            hiveæ•°æ®ç±»å‹ï¼Œè¡¨å’Œåº“çš„å¢åˆ æ”¹æŸ¥ï¼ŒJOIN
        </h3>
        
    </div>

    
    
    
    
    
    
    <footer class="article-time">
        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
            <time class="article-time--published">Apr 14, 2024</time>
        </div>
        

        
        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



            <time class="article-time--reading">
                é˜…è¯»æ—¶é•¿: 10 åˆ†é’Ÿ
            </time>
        </div>
        

        
        
        <div class="article-tags">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



            
            
            
            
            
            <a href="/zh-cn/tags/hive/">Hive</a> 
            
            
            , 
            
            <a href="/zh-cn/tags/hadoop/">Hadoop</a> 
            
            
            , 
            
            <a href="/zh-cn/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">æ•°æ®ä»“åº“</a> 
            
            
        </div>
        
    </footer>
    


    
</div>
</header>

    <section class="article-content">
    
    
    <h2 id="æ•°æ®ç±»å‹"><a href="#%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b" class="header-anchor"></a>æ•°æ®ç±»å‹
</h2><p><img src="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image.png"
	width="1453"
	height="1155"
	srcset="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image_hu_7d090bf56db35a87.png 480w, /zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image_hu_3aff232e493f790b.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="125"
		data-flex-basis="301px"
	
></p>
<blockquote>
<p><strong>decimal ç±»å‹ï¼š</strong></p>
<p>decimal(11,2) ä»£è¡¨æœ€å¤šæœ‰ 11 ä½æ•°å­—ï¼Œå…¶ä¸­å 2 ä½æ˜¯å°æ•°ï¼Œæ•´æ•°éƒ¨åˆ†æ˜¯ 9 ä½ï¼›å¦‚æœæ•´æ•°éƒ¨åˆ†è¶…è¿‡ 9 ä½ï¼Œåˆ™è¿™ä¸ªå­—æ®µå°±ä¼šå˜æˆ nullï¼›å¦‚æœå°æ•°éƒ¨åˆ†ä¸è¶³ 2 ä½ï¼Œ åˆ™åé¢ç”¨ 0 è¡¥é½ä¸¤ä½ï¼Œå¦‚æœå°æ•°éƒ¨åˆ†è¶…è¿‡ä¸¤ä½ï¼Œåˆ™è¶…å‡ºéƒ¨åˆ†å››èˆäº”å…¥ã€‚ä¹Ÿå¯ç›´æ¥å†™ decimalï¼Œåé¢ä¸æŒ‡å®šä½æ•°ï¼Œé»˜è®¤æ˜¯ decimal(10,0) æ•´æ•° 10 ä½ï¼Œæ²¡æœ‰å°æ•°
<strong>map ç±»å‹ï¼š</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">zhangsan</span><span class="w"> </span><span class="n">chinese</span><span class="p">:</span><span class="mi">90</span><span class="p">,</span><span class="n">math</span><span class="p">:</span><span class="mi">87</span><span class="p">,</span><span class="n">english</span><span class="p">:</span><span class="mi">63</span><span class="p">,</span><span class="n">nature</span><span class="p">:</span><span class="mi">76</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">lisi</span><span class="w"> </span><span class="n">chinese</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span><span class="n">math</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="n">english</span><span class="p">:</span><span class="mi">78</span><span class="p">,</span><span class="n">nature</span><span class="p">:</span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">wangwu</span><span class="w"> </span><span class="n">chinese</span><span class="p">:</span><span class="mi">89</span><span class="p">,</span><span class="n">math</span><span class="p">:</span><span class="mi">25</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">map1</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">score</span><span class="w"> </span><span class="k">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="nb">int</span><span class="o">&gt;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\t&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">collection</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">map</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;:&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">load</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">inpath</span><span class="w"> </span><span class="s1">&#39;./data/map1.txt&#39;</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">map1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">æŸ¥è¯¢æ•°å­¦â¼¤äº</span><span class="mi">35</span><span class="err">åˆ†çš„å­¦â½£çš„è‹±è¯­å’Œâ¾ƒç„¶æˆç»©ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">score</span><span class="p">[</span><span class="s1">&#39;english&#39;</span><span class="p">]</span><span class="w"> </span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">score</span><span class="p">[</span><span class="s1">&#39;nature&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">map1</span><span class="w"> </span><span class="n">m</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">score</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">35</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">æŸ¥çœ‹æ¯ä¸ªâ¼ˆçš„å‰ä¸¤ç§‘çš„æˆç»©æ€»å’Œ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">m</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">score</span><span class="p">[</span><span class="s1">&#39;chinese&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">m</span><span class="p">.</span><span class="n">score</span><span class="p">[</span><span class="s1">&#39;math&#39;</span><span class="p">]</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">map1</span><span class="w"> </span><span class="n">m</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><strong>struct ç±»å‹ï¼š</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">zhangsan</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="mi">87</span><span class="p">,</span><span class="mi">63</span><span class="p">,</span><span class="mi">76</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">lisi</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">78</span><span class="p">,</span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">wangwu</span><span class="w"> </span><span class="mi">89</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">81</span><span class="p">,</span><span class="mi">9</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">struct1</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">score</span><span class="w"> </span><span class="n">struct</span><span class="o">&lt;</span><span class="n">chinese</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="n">math</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="n">english</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span><span class="n">natrue</span><span class="p">:</span><span class="nb">int</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\t&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">collection</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">å¯¼â¼Šæ•°æ®ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">load</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">inpath</span><span class="w"> </span><span class="s1">&#39;./data/arr1.txt&#39;</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">struct1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">score</span><span class="p">.</span><span class="n">english</span><span class="p">,</span><span class="n">score</span><span class="p">.</span><span class="n">chinese</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">str2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">score</span><span class="p">.</span><span class="n">math</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">35</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><strong>array ç±»å‹ï¼š</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">zhangsan</span><span class="w">    </span><span class="mi">78</span><span class="p">,</span><span class="mi">89</span><span class="p">,</span><span class="mi">92</span><span class="p">,</span><span class="mi">96</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">lisi</span><span class="w">    </span><span class="mi">67</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">83</span><span class="p">,</span><span class="mi">94</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">ç‹äº”</span><span class="w">    </span><span class="mi">23</span><span class="p">,</span><span class="mi">12</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">arr1</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">scores</span><span class="w"> </span><span class="nb">array</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\t&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">collection</span><span class="w"> </span><span class="n">items</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">load</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">inpath</span><span class="w"> </span><span class="s1">&#39;/data/arr1.txt&#39;</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">arr1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">arr1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="err">ç»“æœ</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">--------+---------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="n">name</span><span class="w">    </span><span class="o">|</span><span class="n">scores</span><span class="w">         </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">--------+---------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="n">zhangsan</span><span class="o">|</span><span class="p">[</span><span class="s2">&#34;78,89,92,96&#34;</span><span class="p">]</span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="n">lisi</span><span class="w">    </span><span class="o">|</span><span class="p">[</span><span class="s2">&#34;67,75,83,94&#34;</span><span class="p">]</span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="err">ç‹äº”</span><span class="w">     </span><span class="o">|</span><span class="p">[</span><span class="s2">&#34;23,12&#34;</span><span class="p">]</span><span class="w">     </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">--------+---------------+
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h2 id="åº“æ“ä½œ"><a href="#%e5%ba%93%e6%93%8d%e4%bd%9c" class="header-anchor"></a>åº“æ“ä½œ
</h2><blockquote>
<p><strong>åˆ›å»ºåº“</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="p">[</span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="p">]</span><span class="w"> </span><span class="n">database_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">COMMENT</span><span class="w"> </span><span class="n">database_comment</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">LOCATION</span><span class="w"> </span><span class="n">hdfs_path</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">[</span><span class="k">WITH</span><span class="w"> </span><span class="n">DBPROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="n">property_name</span><span class="o">=</span><span class="n">property_value</span><span class="p">,</span><span class="w"> </span><span class="p">...)];</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><strong>æŸ¥è¯¢åº“</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w"> </span><span class="k">SHOW</span><span class="w"> </span><span class="n">DATABASES</span><span class="w"> </span><span class="p">[</span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;identifier_with_wildcards&#39;</span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="o">#</span><span class="err">æ³¨ï¼š</span><span class="n">likeé€šé…è¡¨è¾¾å¼è¯´æ˜</span><span class="err">ï¼š</span><span class="o">*</span><span class="err">è¡¨ç¤ºä»»æ„ä¸ªä»»æ„å­—ç¬¦ï¼Œ</span><span class="o">|</span><span class="err">è¡¨ç¤ºæˆ–çš„å…³ç³»ã€‚</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><strong>æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DESCRIBE</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="p">[</span><span class="n">EXTENDED</span><span class="p">]</span><span class="w"> </span><span class="n">db_name</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><strong>ä¿®æ”¹æ•°æ®åº“</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="err">ç”¨æˆ·å¯ä»¥ä½¿ç”¨</span><span class="k">alter</span><span class="w"> </span><span class="n">databaseå‘½ä»¤ä¿®æ”¹æ•°æ®åº“æŸäº›ä¿¡æ¯</span><span class="err">ï¼Œå…¶ä¸­èƒ½å¤Ÿä¿®æ”¹çš„ä¿¡æ¯åŒ…æ‹¬</span><span class="n">dbproperties</span><span class="err">ã€</span><span class="k">location</span><span class="err">ã€</span><span class="k">owner</span><span class="w"> </span><span class="k">user</span><span class="err">ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¿®æ”¹æ•°æ®åº“</span><span class="k">location</span><span class="err">ï¼Œä¸ä¼šæ”¹å˜å½“å‰å·²æœ‰è¡¨çš„è·¯å¾„ä¿¡æ¯ï¼Œè€Œåªæ˜¯æ”¹å˜åç»­åˆ›å»ºçš„æ–°è¡¨çš„é»˜è®¤çš„çˆ¶ç›®å½•ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">--ä¿®æ”¹dbproperties
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">database_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">DBPROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="n">property_name</span><span class="o">=</span><span class="n">property_value</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">--ä¿®æ”¹location
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">database_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">LOCATION</span><span class="w"> </span><span class="n">hdfs_path</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">--ä¿®æ”¹owner user
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">database_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">OWNER</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="n">user_name</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><strong>åˆ é™¤æ•°æ®åº“</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DROP</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="p">[</span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="p">]</span><span class="w"> </span><span class="n">database_name</span><span class="w"> </span><span class="p">[</span><span class="k">RESTRICT</span><span class="o">|</span><span class="k">CASCADE</span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">RESTRICT</span><span class="err">ï¼šä¸¥æ ¼æ¨¡å¼ï¼Œè‹¥æ•°æ®åº“ä¸ä¸ºç©ºï¼Œåˆ™ä¼šåˆ é™¤å¤±è´¥ï¼Œé»˜è®¤ä¸ºè¯¥æ¨¡å¼ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CASCADE</span><span class="err">ï¼šçº§è”æ¨¡å¼ï¼Œè‹¥æ•°æ®åº“ä¸ä¸ºç©ºï¼Œåˆ™ä¼šå°†åº“ä¸­çš„è¡¨ä¸€å¹¶åˆ é™¤ã€‚</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<blockquote>
<p><strong>åˆ‡æ¢å½“å‰æ•°æ®åº“</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">USE</span><span class="w"> </span><span class="n">database_name</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div></blockquote>
<h2 id="è¡¨æ“ä½œ"><a href="#%e8%a1%a8%e6%93%8d%e4%bd%9c" class="header-anchor"></a>è¡¨æ“ä½œ
</h2><p>è¡¨æœ‰ä¸´æ—¶è¡¨ã€å¤–éƒ¨è¡¨ã€å†…éƒ¨è¡¨ï¼ˆç®¡ç†è¡¨ï¼‰ã€åˆ†åŒºè¡¨ï¼Œåˆ†æ¡¶è¡¨</p>
<p><img src="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-1.png"
	width="1530"
	height="950"
	srcset="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-1_hu_64a011ad3c353e4.png 480w, /zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-1_hu_9fb217b1a6d3c480.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="161"
		data-flex-basis="386px"
	
></p>
<blockquote>
<p><strong>Linux ä¸Šä¼ æ–‡ä»¶åˆ° hdfs ä¸Š</strong></p>
<p>hdfs dfs -put student.txt
<strong>åŸºäºå…¶ä»–è¡¨çš„ç»“æ„å»ºè¡¨</strong></p>
<p>create table teacher2 <strong>like</strong> teacher;
<br /></p></blockquote>
<h4 id="æ•°æ®å¯¼å…¥å¯¼å‡º"><a href="#%e6%95%b0%e6%8d%ae%e5%af%bc%e5%85%a5%e5%af%bc%e5%87%ba" class="header-anchor"></a>æ•°æ®å¯¼å…¥å¯¼å‡º
</h4><blockquote>
<p><strong>å¯¼å…¥æ–‡ä»¶åˆ° hive è¡¨</strong></p>
<p>LOAD DATA [LOCAL] INPATH &lsquo;filepath&rsquo; [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 &hellip;)];</p>
<p>å…³é”®å­—è¯´æ˜ï¼š</p>
<p>1ï¼‰localï¼šè¡¨ç¤ºä»æœ¬åœ°åŠ è½½æ•°æ®åˆ° Hive è¡¨ï¼›å¦åˆ™ä» HDFS åŠ è½½æ•°æ®åˆ° Hive è¡¨ã€‚</p>
<p>2ï¼‰overwriteï¼šè¡¨ç¤ºè¦†ç›–è¡¨ä¸­å·²æœ‰æ•°æ®ï¼Œå¦åˆ™è¡¨ç¤ºè¿½åŠ ã€‚</p>
<p>3ï¼‰partitionï¼šè¡¨ç¤ºä¸Šä¼ åˆ°æŒ‡å®šåˆ†åŒºï¼Œè‹¥ç›®æ ‡æ˜¯åˆ†åŒºè¡¨ï¼Œéœ€æŒ‡å®šåˆ†åŒºã€‚</p>
<p>æ³¨æ„ï¼åˆ†æ¡¶è¡¨ä¸èƒ½ load dataï¼Œå¯ä»¥å…ˆ load data åˆ°ä¸´æ—¶è¡¨ï¼Œå†ä»ä¸´æ—¶è¡¨ insert from åˆ°åˆ†æ¡¶è¡¨å¯¼å…¥è¡¨åˆ°è¡¨</p>
<p>1ï¼‰create table tbname as select * from tbname;</p>
<p>2ï¼‰insert overwrite table tbname select * from tbname;</p></blockquote>
<blockquote>
<p><strong>æ•°æ®å¯¼å‡º</strong></p>
<p>INSERT (INTO | OVERWRITE) TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 &hellip;)] select_statement;</p>
<p>å…³é”®å­—è¯´æ˜ï¼š</p>
<p>1ï¼‰INTOï¼šå°†ç»“æœè¿½åŠ åˆ°ç›®æ ‡è¡¨</p>
<p>2ï¼‰OVERWRITEï¼šç”¨ç»“æœè¦†ç›–åŸæœ‰æ•°æ®</p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">å¯¼å‡ºæ•°æ®åˆ°æœ¬åœ°â½‚ä»¶ç³»ç»Ÿçš„â½¬å½•ä¸‹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">insert</span><span class="w"> </span><span class="n">overwrite</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s1">&#39;/root/out/00&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">å¯¼å‡ºæ•°æ®åˆ°</span><span class="n">hdfsçš„</span><span class="err">â½¬å½•ä¸‹</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">insert</span><span class="w"> </span><span class="n">overwrite</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s1">&#39;/root/out/01&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">å¯¼å‡ºçš„â½‚ä»¶ä¸­å­—æ®µé»˜è®¤ä¸åˆ†éš”ï¼Œä¿®æ”¹å¯¼å‡ºåçš„åˆ—ä¸åˆ—ä¹‹é—´çš„æ ¼å¼ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">insert</span><span class="w"> </span><span class="n">overwrite</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s1">&#39;/root/out/01&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">student</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>Export&amp;Import</strong></p>
<p>Export å¯¼å‡ºè¯­å¥å¯å°†è¡¨çš„æ•°æ®å’Œå…ƒæ•°æ®ä¿¡æ¯ä¸€å¹¶åˆ°å¤„çš„ HDFS è·¯å¾„ï¼ŒImport å¯å°† Export å¯¼å‡ºçš„å†…å®¹å¯¼å…¥ Hiveï¼Œè¡¨çš„æ•°æ®å’Œå…ƒæ•°æ®ä¿¡æ¯éƒ½ä¼šæ¢å¤ã€‚Export å’Œ Import å¯ç”¨äºä¸¤ä¸ª Hive å®ä¾‹ä¹‹é—´çš„æ•°æ®è¿ç§»ã€‚</p>
<p>EXPORT TABLE tablename TOÂ &rsquo;export_target_path&rsquo;</p>
<p>IMPORT TABLE new_or_original_tablename FROM &lsquo;source_path&rsquo; [LOCATION &lsquo;import_target_path&rsquo;]</p></blockquote>
<blockquote>
<p><strong>ROW FORMAT DELIMITED å‚æ•°</strong></p>
<p>[<strong>FIELDS TERMINATED BY</strong> char]</p>
<p>#åˆ—åˆ†éš”ç¬¦</p>
<p>[<strong>COLLECTION ITEMS</strong> <strong>TERMINATED BY</strong> char]</p>
<p>#mapã€structã€array å…ƒç´ é—´çš„åˆ†éš”ç¬¦</p>
<p>[<strong>MAP KEYS TERMINATED BY</strong> char]</p>
<p>#map ä¸­ key å’Œ value çš„åˆ†éš”ç¬¦</p>
<p>[<strong>LINES</strong> <strong>TERMINATED BY</strong> char]</p>
<p>#è¡Œåˆ†éš”ç¬¦</p></blockquote>
<blockquote>
<p><strong>STORED AS å‚æ•°</strong></p>
<p>æŒ‡å®šæ–‡ä»¶æ ¼å¼ï¼Œå¸¸ç”¨çš„æ–‡ä»¶æ ¼å¼æœ‰ï¼Œtextfileï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œsequence fileï¼Œorc fileã€parquet file ç­‰ç­‰ã€‚</p></blockquote>
<h3 id="åˆ›å»ºè¡¨"><a href="#%e5%88%9b%e5%bb%ba%e8%a1%a8" class="header-anchor"></a>åˆ›å»ºè¡¨
</h3><h4 id="ä¸´æ—¶è¡¨"><a href="#%e4%b8%b4%e6%97%b6%e8%a1%a8" class="header-anchor"></a>ä¸´æ—¶è¡¨
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="k">CREATE</span><span class="w"> </span><span class="p">[</span><span class="k">TEMPORARY</span><span class="p">]</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">exist</span><span class="w"> </span><span class="n">tb_name</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å†…éƒ¨è¡¨"><a href="#%e5%86%85%e9%83%a8%e8%a1%a8" class="header-anchor"></a>å†…éƒ¨è¡¨
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">student</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\t&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">location</span><span class="w"> </span><span class="s1">&#39;/user/hive/warehouse/student&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">æŒ‡å®šè¡¨çš„æ•°æ®ä½ç½®ï¼Œè¡¨åˆ é™¤åï¼Œæ–‡ä»¶ä¹Ÿä¼šåˆ é™¤</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å¤–éƒ¨è¡¨"><a href="#%e5%a4%96%e9%83%a8%e8%a1%a8" class="header-anchor"></a>å¤–éƒ¨è¡¨
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="k">create</span><span class="w"> </span><span class="k">external</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">student</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\t&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">location</span><span class="w"> </span><span class="s1">&#39;/user/hive/warehouse/student&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">è¡¨åˆ é™¤åï¼Œæ–‡ä»¶ä¸ä¼šåˆ é™¤</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å†…å¤–éƒ¨è¡¨è½¬æ¢"><a href="#%e5%86%85%e5%a4%96%e9%83%a8%e8%a1%a8%e8%bd%ac%e6%8d%a2" class="header-anchor"></a>å†…å¤–éƒ¨è¡¨è½¬æ¢
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">å†…éƒ¨è¡¨è½¬å¤–éƒ¨è¡¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tableName</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">tblproperties</span><span class="p">(</span><span class="s1">&#39;EXTERNAL&#39;</span><span class="o">=</span><span class="s1">&#39;TRUE&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">æ³¨æ„ï¼šå†…éƒ¨è¡¨è½¬å¤–éƒ¨è¡¨ï¼Œ</span><span class="k">True</span><span class="err">â¼€å®šè¦â¼¤å†™</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">å¤–éƒ¨è¡¨è½¬å†…éƒ¨è¡¨</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">alter</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tableName</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">tblproperties</span><span class="p">(</span><span class="s1">&#39;EXTERNAL&#39;</span><span class="o">=</span><span class="s1">&#39;false&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">è¯´æ˜ï¼š</span><span class="n">falseä¸åŒºåˆ†</span><span class="err">â¼¤â¼©</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="åˆ†åŒºè¡¨"><a href="#%e5%88%86%e5%8c%ba%e8%a1%a8" class="header-anchor"></a>åˆ†åŒºè¡¨
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">ä¸€çº§åˆ†åŒº</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">part1</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">partitioned</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">(</span><span class="n">dt</span><span class="w"> </span><span class="n">string</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">lines</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">å¯¼å…¥æ•°æ®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">load</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">inpath</span><span class="w"> </span><span class="s1">&#39;./data/user1.txt&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">into</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test_ext</span><span class="w"> </span><span class="n">partition</span><span class="p">(</span><span class="n">dt</span><span class="o">=</span><span class="s1">&#39;2020-05-05&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">äºŒçº§åˆ†åŒº</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">part2</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">partitioned</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">(</span><span class="k">year</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="k">month</span><span class="w"> </span><span class="n">string</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">å¯¼å…¥æ•°æ®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">load</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">inpath</span><span class="w"> </span><span class="s1">&#39;./data/user1.txt&#39;</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">part2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">partition</span><span class="p">(</span><span class="k">year</span><span class="o">=</span><span class="s1">&#39;2020&#39;</span><span class="p">,</span><span class="k">month</span><span class="o">=</span><span class="s1">&#39;03&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">ä¸‰çº§åˆ†åŒº</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">exists</span><span class="w"> </span><span class="n">part3</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="n">name</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">partitioned</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">(</span><span class="k">year</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="k">month</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="k">day</span><span class="w"> </span><span class="n">string</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">row</span><span class="w"> </span><span class="n">format</span><span class="w"> </span><span class="n">delimited</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">fields</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;,&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">å¯¼å…¥æ•°æ®</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">load</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="n">inpath</span><span class="w"> </span><span class="s1">&#39;./data/user1.txt&#39;</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">part3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">partition</span><span class="p">(</span><span class="k">year</span><span class="o">=</span><span class="s1">&#39;2020&#39;</span><span class="p">,</span><span class="k">month</span><span class="o">=</span><span class="s1">&#39;05&#39;</span><span class="p">,</span><span class="k">day</span><span class="o">=</span><span class="s1">&#39;01&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">æ·»åŠ åˆ†åŒº</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tablename</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="n">PARTITION</span><span class="w"> </span><span class="p">(</span><span class="n">partition_key</span><span class="o">=</span><span class="s1">&#39;partition_value&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">......);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">åˆ é™¤åˆ†åŒº</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tablename</span><span class="w"> </span><span class="k">DROP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="p">(</span><span class="n">partition_key</span><span class="o">=</span><span class="s1">&#39;partition_value&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">åªæ˜¯åˆ é™¤å…ƒæ•°æ®ï¼Œ</span><span class="n">hdfsæ–‡ä»¶ä¾ç„¶ä¿ç•™</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">ä¿®æ”¹åˆ†åŒºå€¼</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tablename</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="p">(</span><span class="n">partition_key</span><span class="o">=</span><span class="s1">&#39;old_partition_value&#39;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">RENAME</span><span class="w"> </span><span class="k">TO</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PARTITION</span><span class="w"> </span><span class="p">(</span><span class="n">partition_key</span><span class="o">=</span><span class="s1">&#39;new_partition_value&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>æ³¨æ„ï¼</strong></p>
<p>ä¿®æ”¹åˆ†åŒºåªä¼šåœ¨å…ƒæ•°æ®ä¸­ä¿®æ”¹ï¼Œä¸ä¼šåŒæ­¥ä¿®æ”¹ HDFS è·¯å¾„ï¼Œå¦‚ï¼š</p>
<p>1ï¼‰åŸåˆ†åŒºè·¯å¾„ä¸ºï¼š /user/hive/warehouse/test.db/test_table/month=201910 ï¼Œåˆ†åŒºåï¼š month=&lsquo;201910&rsquo;</p>
<p>2ï¼‰å°†åˆ†åŒºåä¿®æ”¹ä¸ºï¼š201911 åï¼Œåˆ†åŒºæ‰€åœ¨è·¯å¾„ä¸å˜ï¼Œä¾æ—§ æ˜¯ï¼š/user/hive/warehouse/test.db/test_table/month=201910</p>
<p>å¦‚æœå¸Œæœ›ä¿®æ”¹åˆ†åŒºååï¼ŒåŒæ­¥ä¿®æ”¹ HDFS çš„è·¯å¾„ï¼Œå¹¶ä¿è¯æ­£å¸¸å¯ç”¨ï¼Œéœ€è¦ï¼š</p>
<p>1ï¼‰åœ¨å…ƒæ•°æ®åº“ä¸­ï¼š æ‰¾åˆ° SDS è¡¨ -&gt; æ‰¾åˆ° LOCATION åˆ— -&gt; æ‰¾åˆ°å¯¹åº”åˆ†åŒºçš„è·¯å¾„è®°å½•è¿›è¡Œä¿®æ”¹ å¦‚å°†è®°å½•çš„ï¼š /user/hive/warehouse/test.db/test_table/month=201910 ä¿®æ”¹ ä¸ºï¼š /user/hive/warehouse/test.db/test_table/month=201911</p>
<p>2ï¼‰åœ¨ HDFS ä¸­ï¼ŒåŒæ­¥ä¿®æ”¹æ–‡ä»¶å¤¹å</p>
<p>å¦‚å°†æ–‡ä»¶å¤¹ï¼š /user/hive/warehouse/test.db/test_table/month=201910 ä¿®æ”¹ä¸ºï¼š /user/hive/warehouse/test.db/test_table/month=201911</p></blockquote>
<h4 id="åˆ†æ¡¶è¡¨"><a href="#%e5%88%86%e6%a1%b6%e8%a1%a8" class="header-anchor"></a>åˆ†æ¡¶è¡¨
</h4><p><img src="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-2.png"
	width="1830"
	height="980"
	srcset="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-2_hu_23071b43038d70c6.png 480w, /zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-2_hu_59f61206e668d22f.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="186"
		data-flex-basis="448px"
	
></p>
<blockquote>
<p><strong>åˆ†æ¡¶è¡¨ä¸èƒ½ä½¿ç”¨ load data ï¼ï¼ï¼åªèƒ½ insert ..Â select ..from</strong></p>
<p><strong>åŸå› ï¼šåˆ†æ¡¶è¡¨æ˜¯è¦æŠŠæ•°æ®åˆ’åˆ†æˆ n ä»½ï¼Œåˆ’åˆ†è§„åˆ™å°±æ˜¯åŸºäºåˆ†æ¡¶åˆ—çš„å€¼è¿›è¡Œ hash å–æ¨¡æ¥å†³å®šï¼Œç”±äº load data ä¸ä¼šè§¦å‘ mapreduceï¼Œæ²¡æœ‰è®¡ç®—è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æ— æ³•æ‰§è¡Œ hash ç®—æ³•ï¼Œåªæ˜¯ç®€å•çš„ç§»åŠ¨æ•°æ®ã€‚</strong></p>
<p><strong>Hash å–æ¨¡ç®—æ³•ï¼š</strong></p>
<p><strong>åŒæ ·çš„å€¼åœ¨ hash åŠ å¯†åçš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œä¸è®ºè®¡ç®—å¤šå°‘æ¬¡éƒ½ä¸ä¼šæ”¹å˜ã€‚åŸºäºè¿™ä¸ªç‰¹å¾ï¼Œ</strong></p>
<p>**å‡å¦‚è§„å®šæŠŠè¡¨åˆ’åˆ†æˆ 3 ä¸ªæ¡¶ï¼Œé‚£ä¹ˆå¯¹è¡¨çš„åˆ†æ¡¶åˆ—çš„å­—æ®µåè¿›è¡Œ hash è®¡ç®—ï¼Œäº§ç”Ÿçš„å€¼å†%3 å–æ¨¡ï¼Œå–æ¨¡çš„ç»“æœå¿…ç„¶æ˜¯ 0 æˆ– 1 æˆ– 2ï¼ŒåŸºäºå–æ¨¡çš„ç»“æœï¼ŒæŠŠå–æ¨¡ç»“æœç›¸åŒçš„æ”¾åˆ°åŒä¸€ä¸ªæ¡¶ä¸­ã€‚**å–æ¨¡ç›¸åŒçš„ä¸€å®šåœ¨åŒä¸€æ–‡ä»¶ï¼ŒåŒä¸€æ–‡ä»¶çš„æœªå¿…å–æ¨¡éƒ½ç›¸åŒã€‚</p></blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">course</span><span class="w"> </span><span class="p">(</span><span class="n">c_id</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="n">c_name</span><span class="w"> </span><span class="n">string</span><span class="p">,</span><span class="n">t_id</span><span class="w"> </span><span class="n">string</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">[</span><span class="n">PARTITION</span><span class="p">(</span><span class="n">partition_key</span><span class="o">=</span><span class="s1">&#39;partition_value&#39;</span><span class="p">)]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">CLUSTERED</span><span class="w"> </span><span class="k">BY</span><span class="p">(</span><span class="n">c_id</span><span class="p">)</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">BUCKETS</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ROW</span><span class="w"> </span><span class="n">FORMAT</span><span class="w"> </span><span class="n">DELIMITED</span><span class="w"> </span><span class="n">FIELDS</span><span class="w"> </span><span class="n">TERMINATED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="s1">&#39;\t&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">åˆ†æ¡¶è¡¨éœ€è¦å¼€å¯ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">set</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">enforce</span><span class="p">.</span><span class="n">bucketing</span><span class="o">=</span><span class="k">true</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">è®¾ç½®è‡ªåŠ¨åŒ¹é…æ¡¶æ•°é‡çš„</span><span class="n">reduces</span><span class="w"> </span><span class="n">taskæ•°é‡</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">#</span><span class="err">åˆ†æ¡¶è¡¨ä¸èƒ½ä½¿ç”¨</span><span class="k">load</span><span class="w"> </span><span class="k">data</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æŸ¥è¯¢è¡¨"><a href="#%e6%9f%a5%e8%af%a2%e8%a1%a8" class="header-anchor"></a>æŸ¥è¯¢è¡¨
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="k">select</span><span class="w">  </span><span class="p">..</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="p">..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">join</span><span class="w"> </span><span class="p">[</span><span class="n">tableName</span><span class="p">]</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="p">..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="p">..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">having</span><span class="w"> </span><span class="p">..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">sort</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="p">..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">limit</span><span class="w"> </span><span class="p">..</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">union</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="k">all</span><span class="w"> </span><span class="p">...</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>limit</strong></p>
<p>select * from emp limit 2,3; &ndash; è¡¨ç¤ºä»ç¬¬ 2 è¡Œå¼€å§‹ï¼Œå‘ä¸‹æŠ“å– 3 è¡Œ</p></blockquote>
<h3 id="join"><a href="#join" class="header-anchor"></a>JOIN
</h3><p><img src="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-3.png"
	width="1255"
	height="1105"
	srcset="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-3_hu_a9b6cdd50a49587b.png 480w, /zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-3_hu_39967c1993e7096c.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="113"
		data-flex-basis="272px"
	
></p>
<blockquote>
<p>ç”±å›¾å¯çŸ¥ï¼Œ**å·¦å¤–è¿æ¥ï¼ˆleft joinï¼‰**å°±æ˜¯ä»¥å·¦è¡¨ä¸ºä¸» Â ï¼Œå·¦è¡¨å¤šå°‘è¡Œï¼Œè¿æ¥çš„ç»“æœè¡¨å°±å¤šå°‘è¡Œï¼Œ**å³å¤–è¿æ¥ï¼ˆright joinï¼‰**åŒç†ã€‚**æ»¡å¤–è¿æ¥ï¼ˆfull outer joinï¼‰**å°±æ˜¯å·¦è¡¨ä¸­æœ‰ï¼Œå³è¡¨æ²¡æœ‰çš„ï¼Œå³è¡¨è¡¥ä¸º NULLï¼Œå³è¡¨ä¸­æœ‰ï¼Œå·¦è¡¨æ²¡æœ‰ï¼Œå·¦è¡¨è¡¥ä¸º NULLï¼Œç±»ä¼¼äºæ±‚å¹¶é›†ã€‚**å†…è¿æ¥ï¼ˆinner joinï¼‰**å°±æ˜¯æ±‚äº¤é›†ï¼Œæ‰¾ä¸¤å¼ è¡¨éƒ½æœ‰çš„</p></blockquote>
<h3 id="ä¿®æ”¹è¡¨"><a href="#%e4%bf%ae%e6%94%b9%e8%a1%a8" class="header-anchor"></a>ä¿®æ”¹è¡¨
</h3><blockquote>
<p><strong>é‡å‘½åè¡¨</strong></p>
<p>ALTER TABLE table_name RENAME TO new_table_name</p></blockquote>
<blockquote>
<p><strong>å¢åŠ åˆ—</strong></p>
<p>è¯¥è¯­å¥å…è®¸ç”¨æˆ·å¢åŠ æ–°çš„åˆ—ï¼Œæ–°å¢åˆ—çš„ä½ç½®ä½äºæœ«å°¾ã€‚</p>
<p><strong>ALTER TABLE</strong> table_name <strong>ADD</strong> <strong>COLUMNS</strong> (col_name data_type [<strong>COMMENT</strong> col_comment], &hellip;)</p></blockquote>
<blockquote>
<p><strong>æ›´æ–°åˆ—</strong></p>
<p>è¯¥è¯­å¥å…è®¸ç”¨æˆ·ä¿®æ”¹æŒ‡å®šåˆ—çš„åˆ—åã€æ•°æ®ç±»å‹ã€æ³¨é‡Šä¿¡æ¯ä»¥åŠåœ¨è¡¨ä¸­çš„ä½ç½®ã€‚</p>
<p><strong>ALTER TABLE</strong> table_name <strong>CHANGE</strong> <strong>COLUMN</strong>Â col_old_name col_new_name column_type [<strong>COMMENT</strong> col_comment] [<strong>FIRST</strong>|<strong>AFTER</strong> column_name]</p></blockquote>
<blockquote>
<p><strong>æ›¿æ¢åˆ—</strong></p>
<p>è¯¥è¯­å¥å…è®¸ç”¨æˆ·ç”¨æ–°çš„åˆ—é›†æ›¿æ¢è¡¨ä¸­åŸæœ‰çš„å…¨éƒ¨åˆ—ã€‚</p>
<p><strong>ALTER TABLE</strong> table_name <strong>REPLACE COLUMNS</strong> (col_name data_type [<strong>COMMENT</strong> col_comment], &hellip;)</p></blockquote>
<h3 id="åˆ é™¤è¡¨"><a href="#%e5%88%a0%e9%99%a4%e8%a1%a8" class="header-anchor"></a>åˆ é™¤è¡¨
</h3><blockquote>
<p>DROP TABLE [IF EXISTS] table_name;</p></blockquote>
<h3 id="æ¸…ç©ºè¡¨"><a href="#%e6%b8%85%e7%a9%ba%e8%a1%a8" class="header-anchor"></a>æ¸…ç©ºè¡¨
</h3><blockquote>
<p><strong>TRUNCATE</strong> [<strong>TABLE</strong>] table_name</p>
<p>æ³¨æ„ï¼štruncate åªèƒ½æ¸…ç©ºç®¡ç†è¡¨ï¼Œä¸èƒ½åˆ é™¤å¤–éƒ¨è¡¨ä¸­æ•°æ®ã€‚</p></blockquote>
<h3 id="ç‰¹ä¾‹-update-å’Œ-delete"><a href="#%e7%89%b9%e4%be%8b-update-%e5%92%8c-delete" class="header-anchor"></a>ç‰¹ä¾‹-update å’Œ deleteÂ 
</h3><p>æ›´æ–°å’Œåˆ é™¤çš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œå’Œå…³ç³»å‹æ•°æ®åº“ä¸€è‡´ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸¤ä¸ªæ“ä½œéƒ½åªèƒ½åœ¨<strong>æ”¯æŒ ACID çš„è¡¨</strong>ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡è¡¨ä¸Šæ‰èƒ½æ‰§è¡Œã€‚</p>
<blockquote>
<p>-- æ›´æ–°</p>
<p>UPDATE tablename SET column = value [, column = value &hellip;] [WHERE expression]</p>
<p>--åˆ é™¤</p>
<p>DELETE FROM tablename [WHERE expression]</p></blockquote>
<p>éœ€è¦é…ç½® hive-site.xmlï¼Œå¼€å¯äº‹åŠ¡æ”¯æŒï¼Œé…ç½®å®Œæˆåé‡å¯ hiveã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">hive</span><span class="p">.</span><span class="n">support</span><span class="p">.</span><span class="n">concurrency</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="k">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">hive</span><span class="p">.</span><span class="n">enforce</span><span class="p">.</span><span class="n">bucketing</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="k">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">hive</span><span class="p">.</span><span class="k">exec</span><span class="p">.</span><span class="k">dynamic</span><span class="p">.</span><span class="n">partition</span><span class="p">.</span><span class="k">mode</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">nonstrict</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">hive</span><span class="p">.</span><span class="n">txn</span><span class="p">.</span><span class="n">manager</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">org</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">hadoop</span><span class="p">.</span><span class="n">hive</span><span class="p">.</span><span class="n">ql</span><span class="p">.</span><span class="n">lockmgr</span><span class="p">.</span><span class="n">DbTxnManager</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">hive</span><span class="p">.</span><span class="n">compactor</span><span class="p">.</span><span class="n">initiator</span><span class="p">.</span><span class="k">on</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="k">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">hive</span><span class="p">.</span><span class="k">in</span><span class="p">.</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="k">true</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="o">&lt;/</span><span class="n">property</span><span class="o">&gt;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="è§†å›¾"><a href="#%e8%a7%86%e5%9b%be" class="header-anchor"></a>è§†å›¾
</h2><p>Hive ä¸­çš„è§†å›¾å’Œ RDBMS ä¸­è§†å›¾çš„æ¦‚å¿µä¸€è‡´ï¼Œéƒ½æ˜¯ä¸€ç»„æ•°æ®çš„é€»è¾‘è¡¨ç¤ºï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€æ¡ SELECT è¯­å¥ çš„ç»“æœé›†ã€‚è§†å›¾æ˜¯çº¯ç²¹çš„é€»è¾‘å¯¹è±¡ï¼Œæ²¡æœ‰å…³è”çš„å­˜å‚¨ (Hive 3.0.0 å¼•å…¥çš„ç‰©åŒ–è§†å›¾é™¤å¤–)ï¼Œå½“æŸ¥è¯¢å¼•ç”¨è§† å›¾æ—¶ï¼ŒHive å¯ä»¥å°†è§†å›¾çš„å®šä¹‰ä¸æŸ¥è¯¢ç»“åˆèµ·æ¥ï¼Œä¾‹å¦‚å°†æŸ¥è¯¢ä¸­çš„è¿‡æ»¤å™¨æ¨é€åˆ°è§†å›¾ä¸­ã€‚</p>
<blockquote>
<p>åœ¨ Hive ä¸­å¯ä»¥ä½¿ç”¨ CREATE VIEW åˆ›å»ºè§†å›¾ï¼Œå¦‚æœå·²å­˜åœ¨å…·æœ‰ç›¸åŒåç§°çš„è¡¨æˆ–è§†å›¾ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œ å»ºè®®ä½¿ç”¨ IF NOT EXISTS é¢„åšåˆ¤æ–­ã€‚åœ¨ä½¿ç”¨è§†å›¾æ—¶å€™éœ€è¦æ³¨æ„ä»¥ä¸‹äº‹é¡¹ï¼š</p>
<ul>
<li>è§†å›¾æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ç”¨ä½œ LOAD / INSERT / ALTER çš„ç›®æ ‡ï¼›</li>
<li>åœ¨åˆ›å»ºè§†å›¾æ—¶å€™è§†å›¾å°±å·²ç»å›ºå®šï¼Œå¯¹åŸºè¡¨çš„åç»­æ›´æ”¹ï¼ˆå¦‚æ·»åŠ åˆ—ï¼‰å°†ä¸ä¼šåæ˜ åœ¨è§†å›¾ï¼›</li>
<li>åˆ é™¤åŸºè¡¨å¹¶ä¸ä¼šåˆ é™¤è§†å›¾ï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤è§†å›¾ï¼›</li>
<li>è§†å›¾å¯èƒ½åŒ…å« ORDER BY å’Œ LIMIT å­å¥ã€‚å¦‚æœå¼•ç”¨è§†å›¾çš„æŸ¥è¯¢è¯­å¥ä¹ŸåŒ…å«è¿™ç±»å­å¥ï¼Œå…¶æ‰§è¡Œä¼˜å…ˆ çº§ä½äºè§†å›¾å¯¹åº”å­—å¥ã€‚ä¾‹å¦‚ï¼Œè§†å›¾ custom_view æŒ‡å®š LIMIT 5ï¼ŒæŸ¥è¯¢è¯­å¥ä¸º select * from custom_view LIMIT 10 ï¼Œæ­¤æ—¶ç»“æœæœ€å¤šè¿”å› 5 è¡Œã€‚</li>
<li>åˆ›å»ºè§†å›¾æ—¶ï¼Œå¦‚æœæœªæä¾›åˆ—åï¼Œåˆ™å°†ä» SELECT è¯­å¥ä¸­è‡ªåŠ¨æ´¾ç”Ÿåˆ—åï¼›</li>
</ul></blockquote>
<h3 id="è§†å›¾å¢åˆ æ”¹"><a href="#%e8%a7%86%e5%9b%be%e5%a2%9e%e5%88%a0%e6%94%b9" class="header-anchor"></a>è§†å›¾å¢åˆ æ”¹ Â 
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="err">åˆ›å»ºè§†å›¾</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">db_name</span><span class="p">.]</span><span class="n">view_name</span><span class="w">   </span><span class="c1">-- è§†å›¾åç§°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[(</span><span class="k">column_name</span><span class="w"> </span><span class="p">[</span><span class="k">COMMENT</span><span class="w"> </span><span class="n">column_comment</span><span class="p">],</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="p">]</span><span class="w">    </span><span class="c1">--åˆ—å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="k">COMMENT</span><span class="w"> </span><span class="n">view_comment</span><span class="p">]</span><span class="w">  </span><span class="c1">--è§†å›¾æ³¨é‡Š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="n">TBLPROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="n">property_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">property_value</span><span class="p">,</span><span class="w"> </span><span class="p">...)]</span><span class="w">  </span><span class="c1">--é¢å¤–ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">AS</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="p">...;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">æŸ¥çœ‹è§†å›¾</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">-- æŸ¥çœ‹æ‰€æœ‰è§†å›¾ï¼š æ²¡æœ‰å•ç‹¬æŸ¥çœ‹è§†å›¾åˆ—è¡¨çš„è¯­å¥ï¼Œåªèƒ½ä½¿ç”¨ show tables
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="n">tables</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">-- æŸ¥çœ‹æŸä¸ªè§†å›¾
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">desc</span><span class="w"> </span><span class="n">view_name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">-- æŸ¥çœ‹æŸä¸ªè§†å›¾è¯¦ç»†ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">desc</span><span class="w"> </span><span class="n">formatted</span><span class="w"> </span><span class="n">view_name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">åˆ é™¤è§†å›¾</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">DROP</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="n">db_name</span><span class="p">.]</span><span class="n">view_name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">-- åˆ é™¤è§†å›¾æ—¶ï¼Œå¦‚æœè¢«åˆ é™¤çš„è§†å›¾è¢«å…¶ä»–è§†å›¾æ‰€å¼•ç”¨ï¼Œè¿™æ—¶å€™ç¨‹åºä¸ä¼šå‘å‡ºè­¦å‘Šï¼Œä½†æ˜¯å¼•ç”¨è¯¥è§†å›¾å…¶ä»–è§†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="err">å›¾å·²ç»å¤±æ•ˆï¼Œéœ€è¦è¿›è¡Œé‡å»ºæˆ–è€…åˆ é™¤ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">ä¿®æ”¹è§†å›¾</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="n">db_name</span><span class="p">.]</span><span class="n">view_name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">select_statement</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">-- è¢«æ›´æ”¹çš„è§†å›¾å¿…é¡»å­˜åœ¨ï¼Œä¸”è§†å›¾ä¸èƒ½å…·æœ‰åˆ†åŒºï¼Œå¦‚æœè§†å›¾å…·æœ‰åˆ†åŒºï¼Œåˆ™ä¿®æ”¹å¤±è´¥ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">ä¿®æ”¹è§†å›¾å±æ€§</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="p">[</span><span class="n">db_name</span><span class="p">.]</span><span class="n">view_name</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">TBLPROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="n">property_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">property_value</span><span class="p">,</span><span class="w"> </span><span class="n">property_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">property_value</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">ç¤ºä¾‹ï¼š</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">custom_view</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">TBLPROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="o">=</span><span class="s1">&#39;heibaiying&#39;</span><span class="p">,</span><span class="s1">&#39;date&#39;</span><span class="o">=</span><span class="s1">&#39;2019-05-
</span></span></span><span class="line"><span class="cl"><span class="s1">    05&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç´¢å¼•"><a href="#%e7%b4%a2%e5%bc%95" class="header-anchor"></a>ç´¢å¼•
</h2><p>Hive åœ¨ 0.7.0 å¼•å…¥äº†ç´¢å¼•çš„åŠŸèƒ½ï¼Œç´¢å¼•çš„è®¾è®¡ç›®æ ‡æ˜¯æé«˜è¡¨æŸäº›åˆ—çš„æŸ¥è¯¢é€Ÿåº¦ã€‚å¦‚æœæ²¡æœ‰ç´¢å¼•ï¼Œå¸¦æœ‰è°“ è¯çš„æŸ¥è¯¢ï¼ˆå¦‚&rsquo;WHERE table1.column = 10&rsquo;ï¼‰ä¼šåŠ è½½æ•´ä¸ªè¡¨æˆ–åˆ†åŒºå¹¶å¤„ç†æ‰€æœ‰è¡Œã€‚ä½†æ˜¯å¦‚æœ column å­˜åœ¨ç´¢å¼•ï¼Œåˆ™åªéœ€è¦åŠ è½½å’Œå¤„ç†æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="ç´¢å¼•åŸç†"><a href="#%e7%b4%a2%e5%bc%95%e5%8e%9f%e7%90%86" class="header-anchor"></a>ç´¢å¼•åŸç†
</h3><p>åœ¨æŒ‡å®šåˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œä¼šäº§ç”Ÿä¸€å¼ ç´¢å¼•è¡¨ï¼ˆè¡¨ç»“æ„å¦‚ä¸‹ï¼‰ï¼Œé‡Œé¢çš„å­—æ®µåŒ…æ‹¬ï¼šç´¢å¼•åˆ—çš„å€¼ã€è¯¥å€¼å¯¹åº”çš„ HDFS æ–‡ä»¶è·¯å¾„ã€è¯¥å€¼åœ¨æ–‡ä»¶ä¸­çš„åç§»é‡ã€‚åœ¨æŸ¥è¯¢æ¶‰åŠåˆ°ç´¢å¼•å­—æ®µæ—¶ï¼Œé¦–å…ˆåˆ°ç´¢å¼•è¡¨æŸ¥æ‰¾ç´¢å¼•åˆ—å€¼å¯¹åº” çš„ HDFS æ–‡ä»¶è·¯å¾„åŠåç§»é‡ï¼Œè¿™æ ·å°±é¿å…äº†å…¨è¡¨æ‰«æã€‚
<img src="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-4.png"
	width="686"
	height="255"
	srcset="/zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-4_hu_831d8592fd761ed7.png 480w, /zh-cn/post/2024/04/hive%E5%85%A5%E9%97%A8-hql%E8%A1%A8%E6%93%8D%E4%BD%9C%E5%BA%93%E6%93%8D%E4%BD%9C%E8%A7%86%E5%9B%BE%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/image-4_hu_80c6955e2bac487c.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="269"
		data-flex-basis="645px"
	
></p>
<h3 id="ç´¢å¼•å¢åˆ æ”¹"><a href="#%e7%b4%a2%e5%bc%95%e5%a2%9e%e5%88%a0%e6%94%b9" class="header-anchor"></a>ç´¢å¼•å¢åˆ æ”¹ Â 
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">    </span><span class="err">åˆ›å»ºç´¢å¼•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">index_name</span><span class="w">     </span><span class="c1">--ç´¢å¼•åç§°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">ON</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">base_table_name</span><span class="w"> </span><span class="p">(</span><span class="n">col_name</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w">  </span><span class="c1">--å»ºç«‹ç´¢å¼•çš„åˆ—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">AS</span><span class="w"> </span><span class="n">index_type</span><span class="w">    </span><span class="c1">--ç´¢å¼•ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="k">WITH</span><span class="w"> </span><span class="k">DEFERRED</span><span class="w"> </span><span class="n">REBUILD</span><span class="p">]</span><span class="w">    </span><span class="c1">--é‡å»ºç´¢å¼•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="n">IDXPROPERTIES</span><span class="w"> </span><span class="p">(</span><span class="n">property_name</span><span class="o">=</span><span class="n">property_value</span><span class="p">,</span><span class="w"> </span><span class="p">...)]</span><span class="w">  </span><span class="c1">--ç´¢å¼•é¢å¤–å±æ€§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="k">IN</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">index_table_name</span><span class="p">]</span><span class="w">    </span><span class="c1">--ç´¢å¼•è¡¨çš„åå­—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[</span><span class="w"> </span><span class="k">ROW</span><span class="w"> </span><span class="n">FORMAT</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span><span class="n">STORED</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="n">STORED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">]</span><span class="w">   </span><span class="c1">--ç´¢å¼•è¡¨è¡Œåˆ†éš”ç¬¦ ã€ å­˜å‚¨æ ¼å¼
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="k">LOCATION</span><span class="w"> </span><span class="n">hdfs_path</span><span class="p">]</span><span class="w">  </span><span class="c1">--ç´¢å¼•è¡¨å­˜å‚¨ä½ç½®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="n">TBLPROPERTIES</span><span class="w"> </span><span class="p">(...)]</span><span class="w">   </span><span class="c1">--ç´¢å¼•è¡¨è¡¨å±æ€§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="p">[</span><span class="k">COMMENT</span><span class="w"> </span><span class="s2">&#34;index comment&#34;</span><span class="p">];</span><span class="w">  </span><span class="c1">--ç´¢å¼•æ³¨é‡Š
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">æŸ¥çœ‹ç´¢å¼•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">--æ˜¾ç¤ºè¡¨ä¸Šæ‰€æœ‰åˆ—çš„ç´¢å¼•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">SHOW</span><span class="w"> </span><span class="n">FORMATTED</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">table_name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">åˆ é™¤ç´¢å¼•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">-- åˆ é™¤ç´¢å¼•ä¼šåˆ é™¤å¯¹åº”çš„ç´¢å¼•è¡¨ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">DROP</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="p">[</span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="p">]</span><span class="w"> </span><span class="n">index_name</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">table_name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">-- å¦‚æœå­˜åœ¨ç´¢å¼•çš„è¡¨è¢«åˆ é™¤äº†ï¼Œå…¶å¯¹åº”çš„ç´¢å¼•å’Œç´¢å¼•è¡¨éƒ½ä¼šè¢«åˆ é™¤ã€‚å¦‚æœç´¢å¼•è¡¨çš„æŸä¸ªåˆ†åŒºè¢«åˆ é™¤äº†ï¼Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="err">é‚£ä¹ˆåˆ†åŒºå¯¹åº”çš„åˆ†åŒºç´¢å¼•ä¹Ÿä¼šè¢«åˆ é™¤ã€‚</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">é‡å»ºç´¢å¼•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">index_name</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">table_name</span><span class="w"> </span><span class="p">[</span><span class="n">PARTITION</span><span class="w"> </span><span class="n">partition_spec</span><span class="p">]</span><span class="w"> </span><span class="n">REBUILD</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">-- å¦‚æœæŒ‡å®šäº† PARTITIONï¼Œåˆ™ä»…é‡å»ºè¯¥åˆ†åŒºçš„ç´¢å¼•ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">æŸ¥çœ‹ç´¢å¼•</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="k">index</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">tb_name</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è®¾ç½®è‡ªåŠ¨ä½¿ç”¨ç´¢å¼•"><a href="#%e8%ae%be%e7%bd%ae%e8%87%aa%e5%8a%a8%e4%bd%bf%e7%94%a8%e7%b4%a2%e5%bc%95" class="header-anchor"></a>è®¾ç½®è‡ªåŠ¨ä½¿ç”¨ç´¢å¼•
</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè™½ç„¶å»ºç«‹äº†ç´¢å¼•ï¼Œä½†æ˜¯ Hive åœ¨æŸ¥è¯¢æ—¶å€™æ˜¯ä¸ä¼šè‡ªåŠ¨å»ä½¿ç”¨ç´¢å¼•çš„ï¼Œéœ€è¦å¼€å¯ç›¸å…³é…ç½®ã€‚ å¼€å¯é…ç½®åï¼Œæ¶‰åŠåˆ°ç´¢å¼•åˆ—çš„æŸ¥è¯¢å°±ä¼šä½¿ç”¨ç´¢å¼•åŠŸèƒ½å»ä¼˜åŒ–æŸ¥è¯¢ã€‚</p>
<blockquote>
<p>SET hive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat;</p>
<p>SET hive.optimize.index.filter=true;</p>
<p>SET hive.optimize.index.filter.compact.minsize=0;</p></blockquote>
<h3 id="ç´¢å¼•ç¼ºé™·"><a href="#%e7%b4%a2%e5%bc%95%e7%bc%ba%e9%99%b7" class="header-anchor"></a>Â  ç´¢å¼•ç¼ºé™·
</h3><p>ç´¢å¼•è¡¨æœ€ä¸»è¦çš„ä¸€ä¸ªç¼ºé™·åœ¨äºï¼šç´¢å¼•è¡¨<strong>æ— æ³•è‡ªåŠ¨ rebuild</strong>ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å¦‚æœè¡¨ä¸­æœ‰æ•°æ®æ–°å¢æˆ–åˆ é™¤ï¼Œ åˆ™å¿…é¡»æ‰‹åŠ¨ rebuildï¼Œé‡æ–°æ‰§è¡Œ MapReduce ä½œä¸šï¼Œç”Ÿæˆç´¢å¼•è¡¨æ•°æ®ã€‚ åŒæ—¶æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ çš„è¯´æ˜ï¼ŒHive ä¼šä» 3.0 å¼€å§‹ç§»é™¤ç´¢å¼•åŠŸèƒ½ï¼Œä¸»è¦åŸºäºä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š</p>
<p>å…·æœ‰è‡ªåŠ¨é‡å†™çš„ç‰©åŒ–è§†å›¾ (Materialized View) å¯ä»¥äº§ç”Ÿä¸ç´¢å¼•ç›¸ä¼¼çš„æ•ˆæœï¼ˆHive 2.3.0 å¢åŠ äº†å¯¹ ç‰©åŒ–è§†å›¾çš„æ”¯æŒï¼Œåœ¨ 3.0 ä¹‹åæ­£å¼å¼•å…¥ï¼‰ã€‚</p>
<p>ä½¿ç”¨åˆ—å¼å­˜å‚¨æ–‡ä»¶æ ¼å¼ï¼ˆParquetï¼ŒORCï¼‰è¿›è¡Œå­˜å‚¨æ—¶ï¼Œè¿™äº›æ ¼å¼æ”¯æŒé€‰æ‹©æ€§æ‰«æï¼Œå¯ä»¥è·³è¿‡ä¸éœ€ è¦çš„æ–‡ä»¶æˆ–å—ã€‚</p>

</section>


    <footer class="article-footer">
    

    </footer>

    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/zh-cn/post/2024/04/hive%E6%9C%AC%E8%B4%A8%E6%9E%B6%E6%9E%84%E7%8E%A9%E6%B3%95/">

        

        <div class="article-details tags-grid-item">
            <h2 class="article-title">Hiveæœ¬è´¨ã€æ¶æ„ã€ç©æ³•</h2>
            
        </div>
    </a>
</article>
            
                
<article class="">
    <a href="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/">

        

        <div class="article-details tags-grid-item">
            <h2 class="article-title">Hiveè°ƒä¼˜</h2>
            
        </div>
    </a>
</article>
            
        </div>
    </div>
</aside>

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 é’ç§‹åšå®¢
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
