<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Hiveè°ƒä¼˜æ±‡æ€»ï¼šåˆ†ç»„èšåˆä¼˜åŒ–ã€joinä¼˜åŒ–ã€æ•°æ®å€¾æ–œä¼˜åŒ–ã€ä»»åŠ¡å¹¶è¡Œåº¦ä¼˜åŒ–ã€å°æ–‡ä»¶åˆå¹¶ä¼˜åŒ–ç­‰">
<title>Hiveè°ƒä¼˜</title>

<link rel='canonical' href='/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/'>

<link rel="stylesheet" href="/scss/style.min.0af8e7a36354f8f50b06a82de1425b9b2d8ee44d812d5ba6d0615d71fe31085d.css">
<meta property='og:title' content="Hiveè°ƒä¼˜">
<meta property='og:description' content="Hiveè°ƒä¼˜æ±‡æ€»ï¼šåˆ†ç»„èšåˆä¼˜åŒ–ã€joinä¼˜åŒ–ã€æ•°æ®å€¾æ–œä¼˜åŒ–ã€ä»»åŠ¡å¹¶è¡Œåº¦ä¼˜åŒ–ã€å°æ–‡ä»¶åˆå¹¶ä¼˜åŒ–ç­‰">
<meta property='og:url' content='/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/'>
<meta property='og:site_name' content='é’ç§‹åšå®¢'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Hive' /><meta property='article:tag' content='æ•°æ®ä»“åº“' /><meta property='article:tag' content='å¤§æ•°æ®' /><meta property='article:published_time' content='2024-04-13T20:49:38&#43;00:00'/><meta property='article:modified_time' content='2024-04-13T20:49:38&#43;00:00'/>
<meta name="twitter:title" content="Hiveè°ƒä¼˜">
<meta name="twitter:description" content="Hiveè°ƒä¼˜æ±‡æ€»ï¼šåˆ†ç»„èšåˆä¼˜åŒ–ã€joinä¼˜åŒ–ã€æ•°æ®å€¾æ–œä¼˜åŒ–ã€ä»»åŠ¡å¹¶è¡Œåº¦ä¼˜åŒ–ã€å°æ–‡ä»¶åˆå¹¶ä¼˜åŒ–ç­‰">
    <link rel="shortcut icon" href="/img/favicon.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
        
        <figure class="site-avatar">
            <a href="/zh-cn/">
                
                

                
                
                <img src="/img/avatar_hu_e49ef230a737d2ad.png" width="300"
                    height="281" class="site-logo" loading="lazy" alt="Avatar">
                
                
            </a>
            
            <span class="emoji">ğŸ’</span>
            
        </figure>
        
        

        <div class="site-meta">
            <h1 class="site-name"><a href="/zh-cn/">é’ç§‹åšå®¢</a></h1>
            <h2 class="site-description">åšå­¦è€Œç¬ƒè¡Œ,åˆ‡é—®è€Œè¿‘æ€</h2>
        </div>
    </header><ol class="menu-social">
        
        <li>
            <a href='https://github.com/QingQiuGeek' target="_blank" 
                title="GitHub"  rel="me">
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                
            </a>
        </li>
        
        <li>
            <a href='https://x.com/QingQiuGeek' target="_blank" 
                title="Twitter"  rel="me">
                
                
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16h4.267l-11.733 -16l-4.267 0" /><path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772" /></svg>
                
            </a>
        </li>
        
        <li>
            <a href='https://t.me/qingqiugeek' target="_blank" 
                title="Telegram"  rel="me">
                
                
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-telegram"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4" /></svg>
                
            </a>
        </li>
        
        <li>
            <a href='https://blog.csdn.net/qq_73181349' target="_blank" 
                title="CSDN"  rel="me">
                
                
                <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="105px" height="88px" viewBox="0 0 105 88" enable-background="new 0 0 105 88" xml:space="preserve">  <image id="image0" width="105" height="88" x="0" y="0"
    xlink:href="data:image/png;base64,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" />
</svg>

                
            </a>
        </li>
        
        <li>
            <a href='https://xhslink.com/m/7KnFDVVsAbr' target="_blank" 
                title="xhs"  rel="me">
                
                
                <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="282px" height="282px" viewBox="0 0 282 282" enable-background="new 0 0 282 282" xml:space="preserve">  <image id="image0" width="282" height="282" x="0" y="0"
    xlink:href="data:image/png;base64,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" />
</svg>

                
            </a>
        </li>
        
    </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/zh-cn/page/about/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/page/archives/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/page/tags/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



                
                <span>æ ‡ç­¾</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/page/links/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>é“¾æ¥</span>
            </a>
        </li>
        
        
        <li >
            <a href='/zh-cn/page/search/' >
                
                
                
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
                
                
            </ol>
        </li>
    </ol>
</aside>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#yarn-å’Œ-mr-èµ„æºé…ç½®">Yarn å’Œ MR èµ„æºé…ç½®</a>
      <ol>
        <li><a href="#yarn-èµ„æºé…ç½®">Yarn èµ„æºé…ç½®</a></li>
        <li><a href="#mr-èµ„æºé…ç½®">MR èµ„æºé…ç½®</a></li>
      </ol>
    </li>
    <li><a href="#explain-æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’">Explain æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’</a></li>
    <li><a href="#åˆ†ç»„èšåˆä¼˜åŒ–"><strong>åˆ†ç»„èšåˆä¼˜åŒ–</strong></a>
      <ol>
        <li><a href="#ä¼˜åŒ–å‰-vs-ä¼˜åŒ–å">ä¼˜åŒ–å‰ VS ä¼˜åŒ–å</a></li>
      </ol>
    </li>
    <li><a href="#join-ä¼˜åŒ–">Join ä¼˜åŒ–</a>
      <ol>
        <li><a href="#common-joinæ™®é€š-join">Common Join(æ™®é€š join)</a>
          <ol>
            <li><a href="#åŸç†">åŸç†</a></li>
          </ol>
        </li>
        <li><a href="#map-join">Map Join</a>
          <ol>
            <li><a href="#åŸç†-1">åŸç†</a></li>
            <li><a href="#ä¼˜åŒ–">ä¼˜åŒ–</a></li>
            <li><a href="#ä¼˜åŒ–æ¡ˆä¾‹">ä¼˜åŒ–æ¡ˆä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#bucket-map-join">Bucket Map Join</a>
          <ol>
            <li><a href="#åŸç†-2">åŸç†</a></li>
            <li><a href="#ä¼˜åŒ–-1">ä¼˜åŒ–</a></li>
            <li><a href="#ä¼˜åŒ–æ¡ˆä¾‹-1">ä¼˜åŒ–æ¡ˆä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#sort-merge-bucket-map-joinsmb-map-join">Sort Merge Bucket Map Join(SMB map join)</a>
          <ol>
            <li><a href="#åŸç†-3">åŸç†</a></li>
            <li><a href="#ä¼˜åŒ–-2">ä¼˜åŒ–</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#æ•°æ®å€¾æ–œä¼˜åŒ–">æ•°æ®å€¾æ–œä¼˜åŒ–</a>
      <ol>
        <li><a href="#åˆ†ç»„èšåˆå¯¼è‡´çš„æ•°æ®å€¾æ–œ">åˆ†ç»„èšåˆå¯¼è‡´çš„æ•°æ®å€¾æ–œ</a>
          <ol>
            <li><a href="#map-side-èšåˆ">Map-Side èšåˆ</a></li>
            <li><a href="#skew-groupby-ä¼˜åŒ–">Skew-GroupBy ä¼˜åŒ–</a></li>
          </ol>
        </li>
        <li><a href="#join-å¯¼è‡´çš„æ•°æ®å€¾æ–œ">Join å¯¼è‡´çš„æ•°æ®å€¾æ–œ</a>
          <ol>
            <li><a href="#map-join-1">map join</a></li>
            <li><a href="#skew-join">skew join</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ä»»åŠ¡å¹¶è¡Œåº¦ä¼˜åŒ–">ä»»åŠ¡å¹¶è¡Œåº¦ä¼˜åŒ–</a>
      <ol>
        <li><a href="#map-ç«¯å¹¶è¡Œåº¦">Map ç«¯å¹¶è¡Œåº¦</a></li>
        <li><a href="#reduce-ç«¯å¹¶è¡Œåº¦">Reduce ç«¯å¹¶è¡Œåº¦</a></li>
      </ol>
    </li>
    <li><a href="#å°æ–‡ä»¶åˆå¹¶ä¼˜åŒ–">å°æ–‡ä»¶åˆå¹¶ä¼˜åŒ–</a>
      <ol>
        <li><a href="#åˆå¹¶-map-ç«¯è¾“å…¥çš„å°æ–‡ä»¶">åˆå¹¶ Map ç«¯è¾“å…¥çš„å°æ–‡ä»¶</a></li>
        <li><a href="#åˆå¹¶-reduce-ç«¯è¾“å‡ºçš„å°æ–‡ä»¶">åˆå¹¶ Reduce ç«¯è¾“å‡ºçš„å°æ–‡ä»¶</a></li>
      </ol>
    </li>
    <li><a href="#å…¶ä»–ä¼˜åŒ–">å…¶ä»–ä¼˜åŒ–</a>
      <ol>
        <li><a href="#cbo-ä¼˜åŒ–">CBO ä¼˜åŒ–</a></li>
        <li><a href="#è°“è¯ä¸‹æ¨">è°“è¯ä¸‹æ¨</a></li>
        <li><a href="#çŸ¢é‡åŒ–æŸ¥è¯¢">çŸ¢é‡åŒ–æŸ¥è¯¢</a></li>
        <li><a href="#fetch-æŠ“å–">Fetch æŠ“å–</a></li>
        <li><a href="#æœ¬åœ°æ¨¡å¼">æœ¬åœ°æ¨¡å¼</a></li>
        <li><a href="#å¹¶è¡Œæ‰§è¡Œ">å¹¶è¡Œæ‰§è¡Œ</a></li>
        <li><a href="#ä¸¥æ ¼æ¨¡å¼">ä¸¥æ ¼æ¨¡å¼</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">


    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/">Hiveè°ƒä¼˜</a>
        </h2>

        
        <h3 class="article-subtitle">
            Hiveè°ƒä¼˜æ±‡æ€»ï¼šåˆ†ç»„èšåˆä¼˜åŒ–ã€joinä¼˜åŒ–ã€æ•°æ®å€¾æ–œä¼˜åŒ–ã€ä»»åŠ¡å¹¶è¡Œåº¦ä¼˜åŒ–ã€å°æ–‡ä»¶åˆå¹¶ä¼˜åŒ–ç­‰
        </h3>
        
    </div>

    
    
    
    
    
    
    <footer class="article-time">
        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
            <time class="article-time--published">Apr 13, 2024</time>
        </div>
        

        
        
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



            <time class="article-time--reading">
                é˜…è¯»æ—¶é•¿: 22 åˆ†é’Ÿ
            </time>
        </div>
        

        
        
        <div class="article-tags">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



            
            
            
            
            
            <a href="/zh-cn/tags/hive/">Hive</a> 
            
            
            , 
            
            <a href="/zh-cn/tags/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">æ•°æ®ä»“åº“</a> 
            
            
            , 
            
            <a href="/zh-cn/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a> 
            
            
        </div>
        
    </footer>
    


    
</div>
</header>

    <section class="article-content">
    
    
    <h2 id="yarn-å’Œ-mr-èµ„æºé…ç½®"><a href="#yarn-%e5%92%8c-mr-%e8%b5%84%e6%ba%90%e9%85%8d%e7%bd%ae" class="header-anchor"></a>Yarn å’Œ MR èµ„æºé…ç½®
</h2><p>é…ç½®é¡¹å‚è€ƒå®˜ç½‘ï¼š<a class="link" href="https://apache.github.io/hadoop/"  title="https://apache.github.io/hadoop/"
     target="_blank" rel="noopener"
    >https://apache.github.io/hadoop/</a></p>
<h3 id="yarn-èµ„æºé…ç½®"><a href="#yarn-%e8%b5%84%e6%ba%90%e9%85%8d%e7%bd%ae" class="header-anchor"></a>Yarn èµ„æºé…ç½®
</h3><p>ä¿®æ”¹ yarn-site.xml,è°ƒæ•´çš„ Yarn å‚æ•°å‡ä¸ CPUã€å†…å­˜ç­‰èµ„æºæœ‰å…³ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>yarn.nodemanager.resource.memory-mb<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>65536<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;description&gt;</span>ä¸€ä¸ªNodeManagerèŠ‚ç‚¹åˆ†é…ç»™Containerä½¿ç”¨çš„å†…å­˜ã€‚è¯¥å‚æ•°çš„é…ç½®ï¼Œå–å†³äºNodeManageræ‰€åœ¨èŠ‚ç‚¹çš„æ€»å†…å­˜å®¹é‡å’Œè¯¥èŠ‚ç‚¹è¿è¡Œçš„å…¶ä»–æœåŠ¡çš„æ•°é‡<span class="nt">&lt;/description&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>yarn.nodemanager.resource.cpu-vcores<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>16<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;description&gt;</span>ä¸€ä¸ªNodeManagerèŠ‚ç‚¹åˆ†é…ç»™Containerä½¿ç”¨çš„CPUæ ¸æ•°ã€‚è¯¥å‚æ•°çš„é…ç½®ï¼ŒåŒæ ·å–å†³äºNodeManageræ‰€åœ¨èŠ‚ç‚¹çš„æ€»CPUæ ¸æ•°å’Œè¯¥èŠ‚ç‚¹è¿è¡Œçš„å…¶ä»–æœåŠ¡ã€‚<span class="nt">&lt;/description&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>yarn.scheduler.maximum-allocation-mb<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>16384<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;description&gt;</span>å•ä¸ªContainerèƒ½å¤Ÿä½¿ç”¨çš„æœ€å¤§å†…å­˜ã€‚<span class="nt">&lt;/description&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;property&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;name&gt;</span>yarn.scheduler.minimum-allocation-mb<span class="nt">&lt;/name&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;value&gt;</span>512<span class="nt">&lt;/value&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;description&gt;</span>å•ä¸ªContainerèƒ½å¤Ÿä½¿ç”¨çš„æœ€å°å†…å­˜ã€‚<span class="nt">&lt;/description&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿®æ”¹åé‡æ–°åˆ†å‘è¯¥é…ç½®æ–‡ä»¶å¹¶é‡å¯ Yarn</p>
<h3 id="mr-èµ„æºé…ç½®"><a href="#mr-%e8%b5%84%e6%ba%90%e9%85%8d%e7%bd%ae" class="header-anchor"></a>MR èµ„æºé…ç½®
</h3><p>MapReduce èµ„æºé…ç½®ä¸»è¦åŒ…æ‹¬ Map Task çš„å†…å­˜å’Œ CPU æ ¸æ•°ï¼Œä»¥åŠ Reduce Task çš„å†…å­˜å’Œ CPU æ ¸æ•°ã€‚æ ¸å¿ƒé…ç½®å‚æ•°å¦‚ä¸‹ï¼š</p>
<p><strong>mapreduce.map.memory.mb</strong></p>
<p>è¯¥å‚æ•°çš„å«ä¹‰æ˜¯ï¼Œå•ä¸ª Map Task ç”³è¯·çš„ container å®¹å™¨å†…å­˜å¤§å°ï¼Œå…¶é»˜è®¤å€¼ä¸º 1024ã€‚è¯¥å€¼ä¸èƒ½è¶…å‡º yarn.scheduler.maximum-allocation-mb å’Œ yarn.scheduler.minimum-allocation-mb è§„å®šçš„èŒƒå›´ã€‚</p>
<blockquote>
<p>è¯¥å‚æ•°éœ€è¦æ ¹æ®ä¸åŒçš„è®¡ç®—ä»»åŠ¡å•ç‹¬è¿›è¡Œé…ç½®ï¼Œåœ¨ hive ä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ä¸ºæ¯ä¸ª SQL è¯­å¥å•ç‹¬è¿›è¡Œé…ç½®ï¼šset mapreduce.map.memory.mb=2048;</p></blockquote>
<p><strong>mapreduce.map.cpu.vcores</strong></p>
<p>è¯¥å‚æ•°çš„å«ä¹‰æ˜¯ï¼Œå•ä¸ª Map Task ç”³è¯·çš„ container å®¹å™¨ cpu æ ¸æ•°ï¼Œå…¶é»˜è®¤å€¼ä¸º 1ã€‚è¯¥å€¼ä¸€èˆ¬æ— éœ€è°ƒæ•´ã€‚å¦‚éœ€è°ƒæ•´è¦ä¿®æ”¹ mapred-site.xml æ–‡ä»¶ï¼ˆmapred-default.xmlï¼‰</p>
<p><strong>mapreduce.reduce.cpu.vcores</strong></p>
<p>è¯¥å‚æ•°çš„å«ä¹‰æ˜¯ï¼Œå•ä¸ª Reduce Task ç”³è¯·çš„ container å®¹å™¨ cpu æ ¸æ•°ï¼Œå…¶é»˜è®¤å€¼ä¸º 1ã€‚è¯¥å€¼ä¸€èˆ¬æ— éœ€è°ƒæ•´ã€‚å¦‚éœ€è°ƒæ•´è¦ä¿®æ”¹ mapred-site.xml æ–‡ä»¶ï¼ˆmapred-default.xmlï¼‰</p>
<p><strong>mapreduce.reduce.memory.mb</strong></p>
<p>è¯¥å‚æ•°çš„å«ä¹‰æ˜¯ï¼Œå•ä¸ª Reduce Task ç”³è¯·çš„ container å®¹å™¨å†…å­˜å¤§å°ï¼Œå…¶é»˜è®¤å€¼ä¸º 1024ã€‚è¯¥å€¼åŒæ ·ä¸èƒ½è¶…å‡º yarn.scheduler.maximum-allocation-mb å’Œ yarn.scheduler.minimum-allocation-mb è§„å®šçš„èŒƒå›´ã€‚</p>
<blockquote>
<p>è¯¥å‚æ•°éœ€è¦æ ¹æ®ä¸åŒçš„è®¡ç®—ä»»åŠ¡å•ç‹¬è¿›è¡Œé…ç½®ï¼Œåœ¨ hive ä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ä¸ºæ¯ä¸ª SQL è¯­å¥å•ç‹¬è¿›è¡Œé…ç½®ï¼šset mapreduce.reduce.memory.mb=2048;</p></blockquote>
<h2 id="explain-æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’"><a href="#explain-%e6%9f%a5%e7%9c%8b%e6%89%a7%e8%a1%8c%e8%ae%a1%e5%88%92" class="header-anchor"></a>Explain æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’
</h2><p>Explain ç”¨äºå‘ˆç° HQL è¯­å¥çš„è¯¦ç»†æ‰§è¡Œæ­¥éª¤ï¼Œç”±ä¸€ç³»åˆ— Stage ç»„æˆï¼Œç®€å•çš„ç†è§£ä¸º HQL æŸ¥è¯¢è¯­å¥çš„ä¸åŒæ‰§è¡Œé˜¶æ®µï¼Œè¿™ä¸€ç³»åˆ— Stage å…·æœ‰ä¾èµ–å…³ç³»ï¼Œæ¯ä¸ª Stage å¯¹åº”ä¸€ä¸ª MapReduce Job æˆ–ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿæ“ä½œç­‰ã€‚</p>
<p>è‹¥æŸä¸ª Stage å¯¹åº”çš„ä¸€ä¸ª MapReduce Jobï¼Œåˆ™å…¶ Map ç«¯å’Œ Reduce ç«¯çš„è®¡ç®—é€»è¾‘åˆ†åˆ«ç”± Map Operator Tree å’Œ Reduce Operator Tree è¿›è¡Œæè¿°ï¼ŒOperator Tree ç”±ä¸€ç³»åˆ—çš„ Operator ç»„æˆï¼Œä¸€ä¸ª Operator ä»£è¡¨åœ¨ Map æˆ– Reduce é˜¶æ®µçš„ä¸€ä¸ªå•ä¸€çš„é€»è¾‘æ“ä½œï¼Œä¾‹å¦‚ TableScan Operatorï¼ŒSelect Operatorï¼ŒJoin Operator ç­‰ã€‚å…·ä½“å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image.png"
	width="213"
	height="681"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image_hu_47b669486afcd8ad.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image_hu_6f7640515ae32138.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="31"
		data-flex-basis="75px"
	
></p>
<blockquote>
<p><strong>å¸¸è§çš„ Operator åŠå…¶ä½œç”¨å¦‚ä¸‹</strong></p>
<p>TableScanï¼šè¡¨æ‰«ææ“ä½œï¼Œé€šå¸¸ map ç«¯ç¬¬ä¸€ä¸ªæ“ä½œè‚¯å®šæ˜¯è¡¨æ‰«ææ“ä½œ</p>
<p>Select Operatorï¼šé€‰å–æ“ä½œ</p>
<p>Group By Operatorï¼šmap ç«¯çš„åˆ†ç»„èšåˆæ“ä½œï¼Œåœ¨åé¢çš„åˆ†ç»„èšåˆä¸­ä¼šè®²åˆ°</p>
<p>Reduce Output Operatorï¼šè¾“å‡ºåˆ° reduce æ“ä½œ</p>
<p>Filter Operatorï¼šè¿‡æ»¤æ“ä½œ</p>
<p>Join Operatorï¼šjoin æ“ä½œ</p>
<p>File Output Operatorï¼šæ–‡ä»¶è¾“å‡ºæ“ä½œ</p>
<p>Fetch Operator å®¢æˆ·ç«¯è·å–æ•°æ®æ“ä½œ</p></blockquote>
<blockquote>
<p><strong>Explain è¯­æ³•</strong></p>
<p>EXPLAIN [FORMATTED | EXTENDED | DEPENDENCY]</p>
<ul>
<li>FORMATTEDï¼šå°†æ‰§è¡Œè®¡åˆ’ä»¥ JSON å­—ç¬¦ä¸²çš„å½¢å¼è¾“å‡º</li>
<li>EXTENDEDï¼šè¾“å‡ºæ‰§è¡Œè®¡åˆ’ä¸­çš„é¢å¤–ä¿¡æ¯ï¼Œé€šå¸¸æ˜¯è¯»å†™çš„æ–‡ä»¶åç­‰ä¿¡æ¯</li>
<li>DEPENDENCYï¼šè¾“å‡ºæ‰§è¡Œè®¡åˆ’è¯»å–çš„è¡¨åŠåˆ†åŒº</li>
</ul>
<p><strong>ä¾‹ï¼š</strong></p>
<p>hive (default)&gt;</p>
<p>explain formatted</p>
<p>select user_id,count(*) from order_detail group by user_id;</p>
<p><img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-1.png"
	width="1435"
	height="886"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-1_hu_df40e0082aa7426d.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-1_hu_38c1b7e1fc123ebc.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="161"
		data-flex-basis="388px"
	
></p></blockquote>
<h2 id="åˆ†ç»„èšåˆä¼˜åŒ–"><a href="#%e5%88%86%e7%bb%84%e8%81%9a%e5%90%88%e4%bc%98%e5%8c%96" class="header-anchor"></a><strong>åˆ†ç»„èšåˆä¼˜åŒ–</strong>
</h2><p>åˆ†ç»„èšåˆæ˜¯é€šè¿‡ MR Job å®ç°çš„ï¼Œmap ç«¯è¯»å–æ•°æ®ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„å­—æ®µåˆ†åŒºï¼Œé€šè¿‡ shuffleï¼ŒæŠŠæ•°æ®å‘åˆ° reduceï¼Œå„ç»„æ•°æ®åœ¨ reduce ç«¯å®Œæˆæœ€ç»ˆçš„èšåˆè¿ç®—ã€‚</p>
<p>åˆ†ç»„èšåˆçš„ä¼˜åŒ–ä¸»è¦å›´ç»•å‡å°‘ shuffle æ•°æ®é‡è¿›è¡Œï¼Œå…·ä½“åšæ³•æ˜¯ map-side èšåˆã€‚map-side èšåˆæ˜¯åœ¨ map ç«¯ç»´æŠ¤ä¸€ä¸ª hash tableï¼Œå…ˆåˆ©ç”¨å…¶å®Œæˆæ•°æ®çš„éƒ¨åˆ†èšåˆï¼Œå†æŠŠèšåˆçš„ç»“æœæŒ‰ç…§åˆ†ç»„å­—æ®µåˆ†åŒºï¼Œå‘åˆ° reduce ç«¯å®Œæˆæœ€ç»ˆèšåˆï¼Œä»¥æ­¤æé«˜åˆ†ç»„èšåˆè¿ç®—æ•ˆç‡ã€‚ç®€è€Œè¨€ä¹‹å°±æ˜¯å¢åŠ äº†ä¸€ä¸ª map ç«¯çš„éƒ¨åˆ†èšåˆè¿‡ç¨‹ï¼Œä»¥å‡å°‘ shuffle çš„å·¥ä½œé‡ï¼Œè¿›è€Œå‡å°‘ reduce ç«¯çš„èšåˆå·¥ä½œé‡ã€‚</p>
<blockquote>
<p>map-side èšåˆç›¸å…³å‚æ•°å¦‚ä¸‹</p>
<p>&ndash;å¯ç”¨ map-side èšåˆï¼Œé»˜è®¤æ˜¯ true</p>
<p><strong>set hive.map.aggr=true;</strong></p>
<p>&ndash;ç”¨äºæ£€æµ‹æºè¡¨æ•°æ®æ˜¯å¦é€‚åˆè¿›è¡Œ map-side èšåˆã€‚æ£€æµ‹çš„æ–¹æ³•æ˜¯ï¼šç³»ç»Ÿè‡ªåŠ¨å…ˆå¯¹è‹¥å¹²æ¡æ•°æ®è¿›è¡Œ map-side èšåˆï¼Œè‹¥èšåˆåçš„æ¡æ•°å’Œèšåˆå‰çš„æ¡æ•°æ¯”å€¼å°äºè¯¥å€¼ï¼Œåˆ™è®¤ä¸ºè¯¥è¡¨é€‚åˆè¿›è¡Œ map-side èšåˆï¼›å¦åˆ™ï¼Œè®¤ä¸ºè¯¥è¡¨æ•°æ®ä¸é€‚åˆè¿›è¡Œ map-side èšåˆï¼Œåç»­æ•°æ®ä¾¿ä¸å†è¿›è¡Œ map-side èšåˆã€‚0.5 æ„å‘³ç€å¹³å‡æœ‰ 2 æ¡æ•°æ®å¯ä»¥èšåˆæˆ 1 æ¡ï¼Œ1 æ„å‘³ç€æ²¡æœ‰å‡ºç°ä»»ä½•çš„èšåˆ</p>
<p><strong>set hive.map.aggr.hash.min.reduction=0.5;</strong></p>
<p>&ndash;ç”¨äº<strong>hive.map.aggr.hash.min.reduction=0.5</strong> æ£€æµ‹æºè¡¨æ˜¯å¦é€‚åˆ map-side èšåˆçš„æ¡æ•°ã€‚</p>
<p><strong>set hive.groupby.mapaggr.checkinterval=100000;</strong></p>
<p>&ndash;map-side èšåˆæ‰€ç”¨çš„ hash table å ç”¨ map task å †å†…å­˜çš„æœ€å¤§æ¯”ä¾‹ï¼Œè‹¥è¶…å‡ºè¯¥å€¼ï¼Œåˆ™ä¼šå¯¹ hash table è¿›è¡Œä¸€æ¬¡ flushã€‚</p>
<p><strong>set hive.map.aggr.hash.force.flush.memory.threshold=0.7;</strong></p></blockquote>
<h3 id="ä¼˜åŒ–å‰-vs-ä¼˜åŒ–å"><a href="#%e4%bc%98%e5%8c%96%e5%89%8d-vs-%e4%bc%98%e5%8c%96%e5%90%8e" class="header-anchor"></a>ä¼˜åŒ–å‰ VS ä¼˜åŒ–å
</h3><p>set hive.map.aggr=false å…³é—­åˆ†ç»„èšåˆä¼˜åŒ–ï¼ŒæŸ¥çœ‹æ‰§è¡Œæ•ˆæœï¼Œåœ¨ Map ç«¯æ²¡æœ‰äº† Group By Operator</p>
<p><img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-2.png"
	width="538"
	height="871"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-2_hu_d4e494b7ea248a44.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-2_hu_c61e4d2575f0ab2a.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="61"
		data-flex-basis="148px"
	
></p>
<p>set hive.map.aggr=true å¼€å¯åˆ†ç»„èšåˆä¼˜åŒ–ï¼ŒæŸ¥çœ‹æ‰§è¡Œæ•ˆæœï¼Œåœ¨ Map ç«¯æœ‰äº† Group By Operatorï¼Œ</p>
<p><img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-3.png"
	width="493"
	height="888"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-3_hu_53044b8f5a377993.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-3_hu_ae68419ad1ada840.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="55"
		data-flex-basis="133px"
	
></p>
<p>è‹¥å‘ç”Ÿ map-side ä¼˜åŒ–ï¼Œä¼˜åŒ–åæ¯”ä¼˜åŒ–å‰çš„ HQL æ‰§è¡Œè€—æ—¶åº”è¯¥æœ‰æ‰€å‡å°‘ï¼Œä¸” map çš„ output æ•°é‡æ˜æ˜¾å°äº input æ•°é‡ã€‚</p>
<p>è‹¥æ²¡æœ‰è§¦å‘ map-sideï¼Œåˆ™ map çš„ output æ•°é‡è™½ç„¶æ¯” input æ•°é‡æœ‰æ‰€å‡å°‘ä½†å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚å…·ä½“æœ‰æ²¡æœ‰è§¦å‘ map-side å¯ä»¥å» web UI ç•Œé¢æŸ¥çœ‹ map æ—¥å¿—ã€‚</p>
<p>æ³¨æ„ï¼ï¼map-side èšåˆä¸å¤Ÿæ™ºèƒ½ï¼Œå³ map ç«¯çš„åˆ†ç»„èšåˆæ˜¯å¦æ‰§è¡Œä¸€å®šç¨‹åº¦ä¸Šä¼šå—åˆ°åˆ†ç»„å­—æ®µåœ¨è¡¨ä¸­å­˜å‚¨çš„ä½ç½®å’Œåˆ†å¸ƒçš„å½±å“ï¼Œè¿™æ˜¯åº•å±‚å­˜å‚¨é—®é¢˜ï¼Œæœªå¿…æ˜¯å› ä¸ºæ•°æ®çœŸçš„ä¸é€‚åˆåˆ†ç»„èšåˆã€‚è¦è§£å†³æ­¤é—®é¢˜å¯ä»¥æå‰å¯¹æ•°æ®<strong>åˆ†åŒºåˆ†æ¡¶</strong>ï¼Œä½¿ç”¨åˆ†åŒºåˆ†æ¡¶è¡¨ï¼Œä½¿å¾—åŒä¸€åŒºåŸŸå­˜å‚¨çš„æ•°æ®åˆ†å¸ƒå…·æœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼Œè¿™æ ·èšåˆç»“æœä¼šæœ‰æ‰€æå‡ã€‚</p>
<blockquote>
<p><strong>ä¾‹ï¼š</strong></p>
<p>1ï¼‰select province_id,count(*) from order_detail group by province_id;</p>
<p>è¯¥è¯­å¥æŸ¥è¯¢æ‰€æœ‰è®¢å•ï¼Œæ ¹æ®çœä»½ id åˆ†ç»„èšåˆï¼Œçœä»½åªæœ‰ 34 ä¸ªï¼Œè¿™æ · map åçš„æ•°æ®åº”è¯¥åªæœ‰ 34 æ¡ï¼Œæ‰€ä»¥èšåˆç»“æœæ˜¯åº”è¯¥æ˜¯æ¯”è¾ƒå¯è§‚çš„ã€‚æ‰€ä»¥ group by çš„åŸºæ•°è¶Šå°ï¼Œä¸€èˆ¬è¶Šé€‚åˆèšåˆã€‚</p>
<p>2ï¼‰select product_id,count(*) from order_detail group by product_id;</p>
<p>è‹¥ product_id è¿™ä¸€åˆ†ç»„å­—æ®µåœ¨ order_detail è¡¨ä¸­åˆ†å¸ƒæ¯”è¾ƒæ•£ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´ hive åœ¨è¡¨ä¸­åˆ‡ç‰‡æŠ½æ ·è¿›è¡Œ map-side æ£€æµ‹çš„æ—¶å€™æµ‹è¯•èšåˆç»“æœ&gt;0.5ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±æ²¡æœ‰ä½¿ç”¨ map-side èšåˆã€‚æ‰€ä»¥è¯´å¦‚æœèƒ½ä¿è¯æŠ½æ ·æ•°æ®çš„æµ‹è¯•ç»“æœ&lt;=0.5ï¼Œå°±ä¼šå®ç°åˆ†ç»„èšåˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è°ƒæ•´<strong>hive.map.aggr.hash.min.reduction</strong> çš„å€¼ä»¥æé«˜ map-side çš„å‘½ä¸­ç‡ã€‚</p></blockquote>
<p><strong>è‹¥ 100w çš„æ•°æ®é›†åˆ†ç»„èšåˆä¹‹åçš„è¾“å‡º&gt;100w,å¯èƒ½çš„åŸå› æ˜¯å¤šæ¬¡è§¦å‘äº† hash table çš„ flush</strong></p>
<h2 id="join-ä¼˜åŒ–"><a href="#join-%e4%bc%98%e5%8c%96" class="header-anchor"></a>Join ä¼˜åŒ–
</h2><p>Join ä¼˜åŒ–å°±æ˜¯æ§åˆ¶ HQL è¯­å¥èµ°å“ªç§ join ç®—æ³•ï¼Œè¿™äº› join ç®—æ³•æœ‰çš„å¿«ï¼Œæœ‰çš„æ…¢ï¼Œæœ‰çš„æ¿€è¿›ï¼Œæœ‰çš„ä¿å®ˆã€‚æˆ‘ä»¬è¦åšçš„å°±æ˜¯è®© HQL èµ°æœ€é€‚åˆè‡ªå·±çš„ join ç®—æ³•ã€‚</p>
<h3 id="common-joinæ™®é€š-join"><a href="#common-join%e6%99%ae%e9%80%9a-join" class="header-anchor"></a>Common Join(æ™®é€š join)
</h3><h4 id="åŸç†"><a href="#%e5%8e%9f%e7%90%86" class="header-anchor"></a>åŸç†
</h4><p>hive ä¸­æœ€ç¨³å®šçš„ join ç®—æ³•ï¼Œå…¶é€šè¿‡ä¸€ä¸ª MapReduce Job å®Œæˆä¸€ä¸ª join æ“ä½œã€‚Map ç«¯è´Ÿè´£è¯»å– join æ“ä½œæ‰€éœ€è¡¨çš„æ•°æ®ï¼Œå¹¶æŒ‰ç…§å…³è”å­—æ®µè¿›è¡Œåˆ†åŒºï¼Œé€šè¿‡ Shuffleï¼Œå°†å…¶å‘é€åˆ° Reduce ç«¯ï¼Œç›¸åŒ key çš„æ•°æ®åœ¨ Reduce ç«¯å®Œæˆæœ€ç»ˆçš„ Join æ“ä½œã€‚</p>
<p><img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-4.png"
	width="641"
	height="479"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-4_hu_d8fba809e1779fb4.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-4_hu_d946e815b71cef4d.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="321px"
	
></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHQL è¯­å¥ä¸­çš„ join æ“ä½œå’Œæ‰§è¡Œè®¡åˆ’ä¸­çš„ Common Join ä»»åŠ¡å¹¶éä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œå³ HQL ä¸­çš„ A è¡¨ join B è¡¨ join C è¡¨åœ¨ common join ä¸­æœªå¿…ä¹Ÿæ˜¯ä¸¤ä¸ª join æ“ä½œï¼Œä¸€ä¸ª HQL è¯­å¥ä¸­çš„ç›¸é‚»çš„ä¸”å…³è”å­—æ®µç›¸åŒçš„å¤šä¸ª join æ“ä½œå¯ä»¥åˆå¹¶ä¸ºä¸€ä¸ª Common Join ä»»åŠ¡ã€‚</p>
<blockquote>
<p>ä¾‹ï¼š
1ï¼‰hive (default)</p>
<p>select a.val, b.val, c.val from</p>
<p>a join b on (a.key = b.key1) join c on (c.key = b.key1)</p>
<p>ä¸Šè¿° sql è¯­å¥ä¸­ä¸¤ä¸ª join æ“ä½œçš„å…³è”å­—æ®µå‡ä¸º b è¡¨çš„ key1 å­—æ®µï¼Œåˆ™è¯¥è¯­å¥ä¸­çš„ä¸¤ä¸ª join æ“ä½œå¯ç”±ä¸€ä¸ª Common Join ä»»åŠ¡å®ç°ï¼Œä¹Ÿå°±æ˜¯å¯é€šè¿‡ 1 ä¸ª Map Reduce ä»»åŠ¡å®ç°ã€‚</p></blockquote>
<blockquote>
<p>2ï¼‰hive (default)&gt; select a.val, b.val, c.val from</p>
<p>a join b on (a.key = b.key1) join c on (c.key = b.key2)</p>
<p>ä¸Šè¿° sql è¯­å¥ä¸­çš„ä¸¤ä¸ª join æ“ä½œå…³è”å­—æ®µå„ä¸ç›¸åŒï¼Œåˆ™è¯¥è¯­å¥çš„ä¸¤ä¸ª join æ“ä½œéœ€è¦å„è‡ªé€šè¿‡ä¸€ä¸ª Common Join ä»»åŠ¡å®ç°ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ 2 ä¸ª Map Reduce ä»»åŠ¡å®ç°ã€‚</p></blockquote>
<h3 id="map-join"><a href="#map-join" class="header-anchor"></a>Map Join
</h3><h4 id="åŸç†-1"><a href="#%e5%8e%9f%e7%90%86-1" class="header-anchor"></a>åŸç†
</h4><p>Map Join ç®—æ³•å¯ä»¥é€šè¿‡ä¸€ä¸ª MR å’Œä¸€ä¸ª MapJoin é˜¶æ®µå®Œæˆä¸€ä¸ª join æ“ä½œï¼Œçœå»äº† shuffle å’Œ reduceï¼Œåœ¨ç¬¬äºŒä¸ª map é˜¶æ®µè¿›è¡Œè¡¨çš„ joinï¼Œä¸éœ€è¦è¿›å…¥ reduce é˜¶æ®µã€‚å…¶é€‚ç”¨åœºæ™¯ä¸ºå¤§è¡¨ join å°è¡¨ã€‚ç¬¬ä¸€ä¸ª Job ä¼šè¯»å–å°è¡¨æ•°æ®ï¼Œå°†å…¶åˆ¶ä½œä¸º hash tableï¼Œå¹¶ä¸Šä¼ è‡³ Hadoop åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸Šä¼ è‡³ HDFSï¼‰ã€‚ç¬¬äºŒä¸ª Job ä¼šå…ˆä»åˆ†å¸ƒå¼ç¼“å­˜ä¸­è¯»å–å°è¡¨æ•°æ®ï¼Œå¹¶ç¼“å­˜åœ¨ Map Task çš„å†…å­˜ä¸­ï¼Œç„¶åæ‰«æå¤§è¡¨æ•°æ®ï¼Œè¿™æ ·åœ¨ map ç«¯å³å¯å®Œæˆå…³è”æ“ä½œã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-5.png"
	width="865"
	height="514"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-5_hu_c9f21c1f5ca0940b.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-5_hu_1529fb5d47ecf2d4.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="168"
		data-flex-basis="403px"
	
></p>
<p>mapreduce local task æ˜¯æœ¬åœ°ä»»åŠ¡ï¼Œè¯»å–å°è¡¨æ•°æ®ï¼Œå› ä¸ºå°è¡¨æ•°æ®å ç”¨å†…å­˜èµ„æºå°‘ï¼Œæ‰€ä»¥ä¸ä¸Šä¼ åˆ° yarnï¼Œç›´æ¥åœ¨æœ¬åœ°è¯»å–æ•ˆç‡æ›´é«˜ ï¼Œè¯»å–ååºåˆ—åŒ–ç”Ÿæˆ hash table å¹¶ä¸Šä¼ åˆ° hdfs çš„ cache ä¸­ã€‚</p>
<p>å…¶ä¸­ Mapper æ˜¯å®ç° Map é˜¶æ®µåŠŸèƒ½çš„ä»£ç ç»„ä»¶ã€‚å®ƒæ¥å—åŸå§‹æ•°æ®ä½œä¸ºè¾“å…¥ï¼Œæ‰§è¡ŒæŸç§è½¬æ¢æ“ä½œï¼Œç„¶åè¾“å‡ºä¸€ç»„é”®å€¼å¯¹ã€‚è¿™äº›é”®å€¼å¯¹ä¼šä½œä¸º Reduce é˜¶æ®µçš„è¾“å…¥ã€‚</p>
<blockquote>
<p>ä¾‹ï¼šSELECT a.key, a.value FROM a JOIN b ON a.key = b.key</p>
<p>å‰æ b è¡¨æ˜¯ä¸€å¼ å°è¡¨ï¼Œå…·ä½“å°è¡¨æœ‰å¤šå°ï¼Œç”±å‚æ•° hive.mapjoin.smalltable.filesize æ¥å†³å®šï¼Œé»˜è®¤å€¼æ˜¯ 25Mã€‚</p></blockquote>
<blockquote>
<p>å‚æ•°åˆ—è¡¨ï¼š</p>
<p>1ï¼‰å°è¡¨è‡ªåŠ¨é€‰æ‹© Mapjoin</p>
<p>set hive.auto.convert.join=true;</p>
<p>é»˜è®¤å€¼ï¼šfalseã€‚è¯¥å‚æ•°ä¸º true æ—¶ï¼ŒHive è‡ªåŠ¨å¯¹å·¦è¾¹çš„è¡¨ç»Ÿè®¡é‡ï¼Œè‹¥æ˜¯å°è¡¨å°±åŠ å…¥å†…å­˜ï¼Œå³å¯¹å°è¡¨ä½¿ç”¨ Map join
2ï¼‰å°è¡¨é˜€å€¼
set hive.mapjoin.smalltable.filesize=25000000;
?é»˜è®¤å€¼ï¼š25M</p></blockquote>
<h4 id="ä¼˜åŒ–"><a href="#%e4%bc%98%e5%8c%96" class="header-anchor"></a>ä¼˜åŒ–
</h4><p><strong>æ³•ä¸€ï¼šhint æç¤º</strong>
æ‰‹åŠ¨æŒ‡å®šé€šè¿‡ map join ç®—æ³•ï¼Œè¯¥æ–¹å¼å·²ç»è¿‡æ—¶ï¼Œä¸æ¨èä½¿ç”¨ã€‚</p>
<blockquote>
<p>hive (default)&gt; select /_+ map join(ta) _/</p>
<p>ta.id, tb.id from table_a ta join table_b tb on ta.id=tb.id;</p></blockquote>
<p><strong>æ³•äºŒï¼šè‡ªåŠ¨è§¦å‘</strong>
Hive åœ¨ç¼–è¯‘ HQL è¯­å¥é˜¶æ®µï¼Œèµ·åˆæ‰€æœ‰çš„ join æ“ä½œå‡é‡‡ç”¨ Common Join ç®—æ³•å®ç°ã€‚</p>
<p>ä¹‹ååœ¨ç‰©ç†ä¼˜åŒ–é˜¶æ®µï¼ŒHive ä¼šæ ¹æ®æ¯ä¸ª Common Join ä»»åŠ¡æ‰€éœ€è¡¨çš„å¤§å°åˆ¤æ–­è¯¥ Common Join ä»»åŠ¡æ˜¯å¦èƒ½å¤Ÿè½¬æ¢ä¸º Map Join ä»»åŠ¡ï¼Œè‹¥æ»¡è¶³è¦æ±‚ï¼ˆå°è¡¨å¤§å°&lt;æŒ‡å®šçš„é˜ˆå€¼ï¼‰ï¼Œä¾¿å°† Common Join ä»»åŠ¡è‡ªåŠ¨è½¬æ¢ä¸º Map Join ä»»åŠ¡ã€‚</p>
<p>ä½†æœ‰äº› Common Join ä»»åŠ¡æ‰€éœ€çš„è¡¨å¤§å°ï¼Œåœ¨ HQL çš„ç¼–è¯‘é˜¶æ®µæ˜¯æœªçŸ¥çš„ï¼ˆä¾‹å¦‚å¯¹å­æŸ¥è¯¢è¿›è¡Œ join æ“ä½œï¼‰ï¼Œæ‰€ä»¥è¿™ç§ Common Join ä»»åŠ¡æ˜¯å¦èƒ½è½¬æ¢æˆ Map Join ä»»åŠ¡åœ¨ç¼–è¯‘é˜¶æ˜¯æ— æ³•ç¡®å®šçš„ã€‚</p>
<p>é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒHive ä¼šåœ¨ç¼–è¯‘é˜¶æ®µç”Ÿæˆä¸€ä¸ªæ¡ä»¶ä»»åŠ¡ï¼ˆConditional Taskï¼‰ï¼Œå…¶ä¸‹ä¼šåŒ…å«ä¸€ä¸ªè®¡åˆ’åˆ—è¡¨ï¼Œè®¡åˆ’åˆ—è¡¨ä¸­åŒ…å«è½¬æ¢åçš„ Map Join ä»»åŠ¡ä»¥åŠåŸæœ‰çš„ Common Join ä»»åŠ¡ã€‚æœ€ç»ˆå…·ä½“é‡‡ç”¨å“ªä¸ªè®¡åˆ’ï¼Œæ˜¯åœ¨è¿è¡Œæ—¶å†³å®šçš„ã€‚å¤§è‡´æ€è·¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-6.png"
	width="865"
	height="609"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-6_hu_9b1e73b062f06732.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-6_hu_ba70a549f87b60b1.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="142"
		data-flex-basis="340px"
	
></p>
<p>Map join è‡ªåŠ¨è½¬æ¢çš„å…·ä½“åˆ¤æ–­é€»è¾‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-7.png"
	width="863"
	height="680"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-7_hu_ab3561a231e66273.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-7_hu_122f568ab470925a.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="126"
		data-flex-basis="304px"
	
></p>
<p>å›¾ç‰‡è¯¦æƒ…çœ‹å°šç¡…è°· P135</p>
<p><strong>å¯»æ‰¾å¤§è¡¨å€™é€‰äººæ—¶è¿˜ä¸çŸ¥é“æ¯å¼ è¡¨çš„å¤§å°</strong>ï¼Œé‚£ä¹ˆé€‰æ‹©è§„åˆ™æ˜¯çœ‹ join æ–¹å¼ï¼Œæœ‰ innner joinã€left joinã€right join ç­‰ç­‰ã€‚</p>
<p>inner joinï¼šæ¯ä¸ªè¡¨éƒ½å¯èƒ½æ˜¯å¤§è¡¨å€™é€‰äººã€‚</p>
<p>left joinï¼šé»˜è®¤å·¦è¡¨ä¸ºå¤§è¡¨å€™é€‰äººï¼Œå³è¡¨å½“ä½œå°è¡¨ï¼Œè¿™æ ·å°è¡¨ä¼šç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œä»¥å¤§è¡¨ä¸ºä¸»ï¼Œä»å¤§è¡¨ä¸­ä¸€æ¡æ¡ join å†…å­˜ä¸­çš„å°è¡¨ï¼Œå¦‚æœåè¿‡æ¥æŠŠå¤§è¡¨ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œä»¥å°è¡¨ä¸ºä¸»ï¼Œä»å°è¡¨ä¸­ä¸€æ¡æ¡ join å†…å­˜ä¸­çš„å¤§è¡¨ï¼Œè‹¥å‡ºç°å¤§è¡¨æœ‰è¯¥å­—æ®µè€Œå°è¡¨æ²¡æœ‰çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹å°±ä¼šå‡ºç°å¤§é‡æ•°æ® join å¤±è´¥ï¼Œå°è¡¨æ•°æ®å°‘ï¼Œå¤§è¡¨æ•°æ®å¤šï¼Œé‚£ä¹ˆä¼šå› ä¸ºå°è¡¨æµªè´¹å¾ˆå¤šæ•°æ®ï¼Œæ‰€ä»¥é€šå¸¸æ˜¯å·¦è¡¨ä¸ºå¤§è¡¨ï¼Œå³è¡¨ä¸ºå°è¡¨ã€‚</p>
<p>right joinï¼šå·¦è¡¨å½“ä½œå°è¡¨ï¼Œå³è¡¨ä¸ºå¤§è¡¨å€™é€‰äººã€‚</p>
<p>full outer joinï¼šæ‰¾ä¸åˆ°å¤§è¡¨å€™é€‰äººï¼Œå› ä¸ºå…¨å¤–è”è¦è¿”å›ä¸¤ä¸ªè¡¨çš„å…¨éƒ¨æ•°æ®ï¼Œä¸¤ä¸ªè¡¨éƒ½è¦å»éå†ï¼Œå°±æ— æ³• map join ä¼˜åŒ–ã€‚</p>
<blockquote>
<p><strong>æ¶‰åŠå‚æ•°ï¼š</strong></p>
<p>&ndash;å¯åŠ¨ Map Join è‡ªåŠ¨è½¬æ¢</p>
<p>set hive.auto.convert.join=true;</p>
<p>&ndash;ä¸€ä¸ª Common Join operator è½¬ä¸º Map Join operator çš„åˆ¤æ–­æ¡ä»¶ï¼šè‹¥è¯¥ Common Join ç›¸å…³çš„è¡¨ä¸­,æŠŠæ¯ä¸€ä¸ªè¡¨éƒ½å½“ä½œå¤§è¡¨å€™é€‰äººï¼Œè‹¥é™¤å¤§è¡¨ä¹‹å¤–çš„ä»»æ„ä¸€å¼ å·²çŸ¥å¤§å°çš„è¡¨çš„å¤§å°&gt;å¤§è¡¨å€™é€‰äººï¼Œåˆ™è¯¥ç»„åˆä¸æˆç«‹ï¼Œä¸ç”Ÿæˆ map joinï¼Œåä¹‹ç”Ÿæˆä¸€ä¸ª Map Join è®¡åˆ’ã€‚æ­¤æ—¶å¯èƒ½å­˜åœ¨å¤šç§ç»„åˆå‡æ»¡è¶³è¯¥æ¡ä»¶,åˆ™ hive ä¼šä¸ºæ¯ç§æ»¡è¶³æ¡ä»¶çš„ç»„åˆå‡ç”Ÿæˆä¸€ä¸ª Map Join è®¡åˆ’,åŒæ—¶è¿˜ä¼šä¿ç•™åŸæœ‰çš„ Common Join è®¡åˆ’ä½œä¸ºåå¤‡(back up)è®¡åˆ’,å®é™…è¿è¡Œæ—¶,ä¼˜å…ˆæ‰§è¡Œ Map Join è®¡åˆ’ï¼Œè‹¥ä¸èƒ½æ‰§è¡ŒæˆåŠŸï¼Œåˆ™å¯åŠ¨ Common Join åå¤‡è®¡åˆ’ã€‚</p>
<p>set hive.mapjoin.smalltable.filesize=250000;</p>
<p>&ndash;å¼€å¯æ— æ¡ä»¶è½¬ Map Join</p>
<p>set hive.auto.convert.join.noconditionaltask=true; -æ— æ¡ä»¶è½¬ Map Join æ—¶çš„å°è¡¨ä¹‹å’Œé˜ˆå€¼,è‹¥ä¸€ä¸ª Common Join operator ç›¸å…³çš„è¡¨ä¸­ï¼Œå­˜åœ¨ n-1 å¼ è¡¨çš„å¤§å°æ€»å’Œ&lt;=è¯¥å€¼,æ­¤æ—¶ hive ä¾¿ä¸ä¼šå†ä¸ºæ¯ç§ n-1 å¼ è¡¨çš„ç»„åˆå‡ç”Ÿæˆ Map Join è®¡åˆ’,åŒæ—¶ä¹Ÿä¸ä¼šä¿ç•™ Common Join ä½œä¸ºåå¤‡è®¡åˆ’ã€‚è€Œæ˜¯åªç”Ÿæˆä¸€ä¸ªæœ€ä¼˜çš„ Map Join è®¡åˆ’ã€‚
set hive.auto.convert.join.noconditionaltask.size=10000000;</p></blockquote>
<h4 id="ä¼˜åŒ–æ¡ˆä¾‹"><a href="#%e4%bc%98%e5%8c%96%e6%a1%88%e4%be%8b" class="header-anchor"></a>ä¼˜åŒ–æ¡ˆä¾‹
</h4><blockquote>
<p>hive (default)&gt; select * from order_detail od</p>
<p>join product_info product on od.product_id = product.id</p>
<p>join province_info province on od.province_id = province.id;</p></blockquote>
<p><strong>ä¼˜åŒ–å‰</strong></p>
<p>ä¸Šè¿° SQL è¯­å¥å…±æœ‰ä¸‰å¼ è¡¨è¿›è¡Œä¸¤æ¬¡ join æ“ä½œï¼Œä¸”ä¸¤æ¬¡ join æ“ä½œçš„å…³è”å­—æ®µä¸åŒã€‚æ•…ä¼˜åŒ–å‰çš„æ‰§è¡Œè®¡åˆ’åº”è¯¥åŒ…å«ä¸¤ä¸ª Common Join operatorï¼Œä¹Ÿå°±æ˜¯ç”±ä¸¤ä¸ª MapReduce ä»»åŠ¡å®ç°ã€‚æ‰§è¡Œè®¡åˆ’å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-8.png"
	width="445"
	height="1391"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-8_hu_3e6bbe204819d3d6.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-8_hu_63b78982ef539f4b.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="31"
		data-flex-basis="76px"
	
></p>
<p><strong>ä¼˜åŒ–æ€è·¯</strong></p>
<p>ä½¿ç”¨å¦‚ä¸‹è¯­å¥è·å–è¡¨/åˆ†åŒºçš„å¤§å°ä¿¡æ¯ï¼š</p>
<blockquote>
<p>hive (default)&gt;</p>
<p>desc formatted table_name partition(partition_col=&lsquo;partition&rsquo;);</p></blockquote>
<p>ç»åˆ†æï¼Œå‚ä¸ join çš„ä¸‰å¼ è¡¨ï¼Œæ•°æ®é‡å¦‚ä¸‹ï¼š</p>
<p><img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-9.png"
	width="1474"
	height="371"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-9_hu_53b2492ddd32221d.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-9_hu_a661e9dca70d29c4.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="397"
		data-flex-basis="953px"
	
></p>
<p><strong>æ–¹æ¡ˆä¸€ï¼š</strong></p>
<blockquote>
<p>å¯ç”¨ Map Join è‡ªåŠ¨è½¬æ¢ã€‚</p>
<p>set hive.auto.convert.join=true;</p>
<p>ä¸ä½¿ç”¨æ— æ¡ä»¶è½¬ Map Joinã€‚</p>
<p>set hive.auto.convert.join.noconditionaltask=false;</p>
<p>è°ƒæ•´ hive.mapjoin.smalltable.filesize å‚æ•°ï¼Œä½¿å…¶å¤§äºç­‰äº product_infoã€‚</p>
<p>set hive.mapjoin.smalltable.filesize=25285707;</p></blockquote>
<p>è¿™æ ·å¯ä¿è¯å°†ä¸¤ä¸ª Common Join operator å‡å¯è½¬ä¸º Map Join operatorï¼Œå¹¶ä¿ç•™ Common Join ä½œä¸ºåå¤‡è®¡åˆ’ï¼Œä¿è¯è®¡ç®—ä»»åŠ¡çš„ç¨³å®šã€‚è°ƒæ•´å®Œçš„æ‰§è¡Œè®¡åˆ’å¦‚ä¸‹å›¾ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-10.png"
	width="541"
	height="1422"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-10_hu_4df7790955068a83.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-10_hu_75b79a59c50968c3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="38"
		data-flex-basis="91px"
	
></p>
<p><strong>æ–¹æ¡ˆäºŒï¼š</strong></p>
<blockquote>
<p>å¯ç”¨ Map Join è‡ªåŠ¨è½¬æ¢ã€‚</p>
<p>set hive.auto.convert.join=true;</p>
<p>ä½¿ç”¨æ— æ¡ä»¶è½¬ Map Joinã€‚</p>
<p>set hive.auto.convert.join.noconditionaltask=true;</p>
<p>è°ƒæ•´ hive.auto.convert.join.noconditionaltask.size å‚æ•°ï¼Œä½¿å…¶å¤§äºç­‰äº product_info å’Œ province_info ä¹‹å’Œã€‚</p>
<p>set hive.auto.convert.join.noconditionaltask.size=25286076;</p></blockquote>
<p>è¿™æ ·å¯ç›´æ¥å°†ä¸¤ä¸ª Common Join operator è½¬ä¸ºä¸¤ä¸ª Map Join operatorï¼Œå¹¶ä¸”ç”±äºä¸¤ä¸ª Map Join operator çš„å°è¡¨å¤§å°ä¹‹å’Œå°äºç­‰äº hive.auto.convert.join.noconditionaltask.sizeï¼Œæ•…ä¸¤ä¸ª Map Join operator ä»»åŠ¡å¯åˆå¹¶ä¸ºåŒä¸€ä¸ªã€‚è¿™ä¸ªæ–¹æ¡ˆè®¡ç®—æ•ˆç‡æœ€é«˜ï¼Œä½†éœ€è¦çš„å†…å­˜ä¹Ÿæ˜¯æœ€å¤šçš„ã€‚</p>
<p>è°ƒæ•´å®Œçš„æ‰§è¡Œè®¡åˆ’å¦‚ä¸‹å›¾ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-11.png"
	width="334"
	height="805"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-11_hu_d1095692a79431fe.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-11_hu_7607218a1c33454a.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="41"
		data-flex-basis="99px"
	
>
<strong>æ–¹æ¡ˆä¸‰ï¼š</strong></p>
<blockquote>
<p>å¯ç”¨ Map Join è‡ªåŠ¨è½¬æ¢ã€‚</p>
<p>set hive.auto.convert.join=true;</p>
<p>ä½¿ç”¨æ— æ¡ä»¶è½¬ Map Joinã€‚</p>
<p>set hive.auto.convert.join.noconditionaltask=true;</p>
<p>è°ƒæ•´ hive.auto.convert.join.noconditionaltask.size å‚æ•°ï¼Œä½¿å…¶ç­‰äº product_infoã€‚</p>
<p>set hive.auto.convert.join.noconditionaltask.size=25285707;</p></blockquote>
<p>è¿™æ ·å¯ç›´æ¥å°†ä¸¤ä¸ª Common Join operator è½¬ä¸º Map Join operatorï¼Œä½†ä¸ä¼šå°†ä¸¤ä¸ª Map Join çš„ä»»åŠ¡åˆå¹¶ã€‚è¯¥æ–¹æ¡ˆè®¡ç®—æ•ˆç‡æ¯”æ–¹æ¡ˆäºŒä½ï¼Œä½†éœ€è¦çš„å†…å­˜ä¹Ÿæ›´å°‘ã€‚
è°ƒæ•´å®Œçš„æ‰§è¡Œè®¡åˆ’å¦‚ä¸‹å›¾ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-12.png"
	width="191"
	height="1408"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-12_hu_c31777942e896c7e.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-12_hu_10df58072d93e378.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="13"
		data-flex-basis="32px"
	
></p>
<h3 id="bucket-map-join"><a href="#bucket-map-join" class="header-anchor"></a>Bucket Map Join
</h3><h4 id="åŸç†-2"><a href="#%e5%8e%9f%e7%90%86-2" class="header-anchor"></a>åŸç†
</h4><p>Bucket Map Join æ˜¯å¯¹ Map Join ç®—æ³•çš„æ”¹è¿›ï¼Œå…¶æ‰“ç ´äº† Map Join åªé€‚ç”¨äºå¤§è¡¨ join å°è¡¨çš„é™åˆ¶ï¼Œå¯ç”¨äºå¤§è¡¨ join å¤§è¡¨çš„åœºæ™¯ã€‚åˆ†æ¡¶å…¶å®å°±æ˜¯æŠŠå¤§è¡¨åŒ–æˆäº†â€œå°è¡¨â€ï¼Œç„¶å Map-Side Join è§£å†³ã€‚</p>
<p>Bucket Map Join çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šè‹¥èƒ½ä¿è¯å‚ä¸ join çš„è¡¨å‡ä¸ºåˆ†æ¡¶è¡¨ï¼Œä¸”å…³è”å­—æ®µä¸ºåˆ†æ¡¶å­—æ®µï¼Œä¸”å…¶ä¸­ä¸€å¼ è¡¨çš„åˆ†æ¡¶æ•°é‡æ˜¯å¦å¤–ä¸€å¼ è¡¨åˆ†æ¡¶æ•°é‡çš„æ•´æ•°å€ï¼Œå°±èƒ½ä¿è¯å‚ä¸ join çš„ä¸¤å¼ è¡¨çš„åˆ†æ¡¶ä¹‹é—´å…·æœ‰æ˜ç¡®çš„å…³è”å…³ç³»ï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨ä¸¤è¡¨çš„åˆ†æ¡¶é—´è¿›è¡Œ Map Join æ“ä½œäº†ã€‚è¿™æ ·ä¸€æ¥ï¼Œç¬¬äºŒä¸ª Job çš„ Map ç«¯å°±æ— éœ€å†ç¼“å­˜å°è¡¨çš„å…¨è¡¨æ•°æ®äº†ï¼Œè€Œåªéœ€ç¼“å­˜å…¶æ‰€éœ€çš„åˆ†æ¡¶å³å¯ã€‚å…¶åŸç†å¦‚å›¾æ‰€ç¤ºï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-13.png"
	width="1235"
	height="705"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-13_hu_cb5f7dc2b3847456.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-13_hu_f86c97fcd542db0d.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="175"
		data-flex-basis="420px"
	
>
ç¬¬ä¸€ä¸ª map å¯¹è¾ƒå°çš„è¡¨ tableB çš„æ¯ä¸ª bucket åºåˆ—åŒ–æˆ hash tableï¼Œä¸Šä¼ åˆ° hdfs cache ä¸­ï¼Œç¬¬äºŒä¸ª map å¯¹è¾ƒå¤§çš„è¡¨ tableA çš„æ¯ä¸ªæ¡¶å•ç‹¬åˆ‡ç‰‡ï¼Œæœ‰å‡ ä¸ªæ¡¶å°±æœ‰å‡ ä¸ª mapper</p>
<h4 id="ä¼˜åŒ–-1"><a href="#%e4%bc%98%e5%8c%96-1" class="header-anchor"></a>ä¼˜åŒ–
</h4><p><strong>hint æç¤º</strong>
Bucket Map Join ä¸æ”¯æŒè‡ªåŠ¨è½¬æ¢ï¼Œå•Šï¼åŸæ¥æ˜¯ hive å›¢é˜Ÿåœ¨ hive2.x å·²ç»æ”¾å¼ƒç»´æŠ¤ MR è®¡ç®—å¼•æ“ï¼Œå»ºè®®ä½¿ç”¨ spark ç­‰è®¡ç®—å¼•æ“ï¼ˆçœ‹åˆ°è¿™ä¹æ­»æˆ‘äº† tmd ç™½å­¦äº†ï¼‰ã€‚
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-14.png"
	width="2160"
	height="190"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-14_hu_aa3268172124e9c2.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-14_hu_ef09d34419541475.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="1136"
		data-flex-basis="2728px"
	
></p>
<blockquote>
<p><strong>å‚æ•°ï¼š</strong></p>
<p>&ndash;å…³é—­ cbo ä¼˜åŒ–ï¼Œcbo ä¼šå¯¼è‡´ hint ä¿¡æ¯è¢«å¿½ç•¥</p>
<p>set hive.cbo.enable=false;</p>
<p>&ndash;map join hint é»˜è®¤ä¼šè¢«å¿½ç•¥(å› ä¸ºå·²ç»è¿‡æ—¶)ï¼Œéœ€å°†å¦‚ä¸‹å‚æ•°è®¾ç½®ä¸º false</p>
<p>set hive.ignore.mapjoin.hint=false;</p>
<p>&ndash;å¯ç”¨ bucket map join ä¼˜åŒ–åŠŸèƒ½</p>
<p>set hive.optimize.bucketmapjoin = true;</p></blockquote>
<h4 id="ä¼˜åŒ–æ¡ˆä¾‹-1"><a href="#%e4%bc%98%e5%8c%96%e6%a1%88%e4%be%8b-1" class="header-anchor"></a>ä¼˜åŒ–æ¡ˆä¾‹
</h4><p>hive (default)&gt; select _ from( select _ from order_detail where dt=&lsquo;2020-06-14&rsquo;) od</p>
<p>join( select * from payment_detail where dt=&lsquo;2020-06-14&rsquo;) pd on od.id=pd.order_detail_id;</p>
<p><strong>ä¼˜åŒ–å‰</strong></p>
<p>ä¸Šè¿° SQL è¯­å¥å…±æœ‰ä¸¤å¼ è¡¨ä¸€æ¬¡ join æ“ä½œï¼Œæ•…ä¼˜åŒ–å‰çš„æ‰§è¡Œè®¡åˆ’åº”åŒ…å«ä¸€ä¸ª Common Join ä»»åŠ¡ï¼Œé€šè¿‡ä¸€ä¸ª MapReduce Job å®ç°ã€‚æ‰§è¡Œè®¡åˆ’å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-15.png"
	width="556"
	height="1002"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-15_hu_d6b5c402d156a695.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-15_hu_3ccb68d6dbe1bffb.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="55"
		data-flex-basis="133px"
	
></p>
<p><strong>ä¼˜åŒ–æ€è·¯</strong></p>
<p>ç»åˆ†æï¼Œå‚ä¸ join çš„ä¸¤å¼ è¡¨ï¼Œæ•°æ®é‡å¦‚ä¸‹ã€‚
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-16.png"
	width="1467"
	height="301"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-16_hu_86b016ba9c62bbb1.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-16_hu_b55ec376440037ac.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="487"
		data-flex-basis="1169px"
	
></p>
<p>ä¸¤å¼ è¡¨éƒ½ç›¸å¯¹è¾ƒå¤§ï¼Œè‹¥é‡‡ç”¨æ™®é€šçš„ Map Join ç®—æ³•ï¼Œåˆ™ Map ç«¯éœ€è¦è¾ƒå¤šçš„å†…å­˜æ¥ç¼“å­˜æ•°æ®ï¼Œå¯ä»¥é€‰æ‹©ä¸º Map æ®µåˆ†é…æ›´å¤šçš„å†…å­˜ï¼Œæ¥ä¿è¯ä»»åŠ¡è¿è¡ŒæˆåŠŸã€‚ä½†æ˜¯ï¼ŒMap ç«¯çš„å†…å­˜ä¸å¯èƒ½æ— ä¸Šé™çš„åˆ†é…ï¼Œæ‰€ä»¥å½“å‚ä¸ Join çš„è¡¨æ•°æ®é‡å‡è¿‡å¤§æ—¶ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨ Bucket Map Join ç®—æ³•ã€‚</p>
<p>åˆ›å»ºä¸¤ä¸ªåˆ†æ¡¶è¡¨ï¼Œorder_detail å»ºè®®åˆ† 16 ä¸ª bucketï¼Œpayment_detail å»ºè®®åˆ† 8 ä¸ª bucket,æ³¨æ„åˆ†æ¡¶ä¸ªæ•°çš„å€æ•°å…³ç³»ä»¥åŠåˆ†æ¡¶å­—æ®µã€‚ç„¶åå‘å…¶ä¸­å¯¼å…¥æ•°æ®ã€‚</p>
<blockquote>
<p>è®¾ç½®ä¼˜åŒ–å‚æ•°ï¼š</p>
<p>&ndash;å…³é—­ cbo ä¼˜åŒ–ï¼Œcbo ä¼šå¯¼è‡´ hint ä¿¡æ¯è¢«å¿½ç•¥ï¼Œéœ€å°†å¦‚ä¸‹å‚æ•°ä¿®æ”¹ä¸º false</p>
<p>set hive.cbo.enable=false;</p>
<p>&ndash;map join hint é»˜è®¤ä¼šè¢«å¿½ç•¥(å› ä¸ºå·²ç»è¿‡æ—¶)ï¼Œéœ€å°†å¦‚ä¸‹å‚æ•°ä¿®æ”¹ä¸º false</p>
<p>set hive.ignore.mapjoin.hint=false;</p>
<p>&ndash;å¯ç”¨ bucket map join ä¼˜åŒ–åŠŸèƒ½,é»˜è®¤ä¸å¯ç”¨ï¼Œéœ€å°†å¦‚ä¸‹å‚æ•°ä¿®æ”¹ä¸º true</p>
<p>set hive.optimize.bucketmapjoin = true;</p>
<p>é‡å†™ SQL è¯­å¥ï¼š</p>
<p>hive (default)&gt;</p>
<p>select /_+ mapjoin(pd) _/ * from order_detail_bucketed od</p>
<p>join payment_detail_bucketed pd on od.id = pd.order_detail_id;</p></blockquote>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-17.png"
	width="256"
	height="1015"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-17_hu_2ff263283659683b.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-17_hu_557c941ca036804f.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="25"
		data-flex-basis="60px"
	
></p>
<blockquote>
<p>ä½¿ç”¨</p>
<p>hive (default)&gt;</p>
<p>explain extended select /_+ mapjoin(pd) _/ *</p>
<p>from order_detail_bucketed od</p>
<p>join payment_detail_bucketed pd on od.id = pd.order_detail_id;æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œåœ¨ Map Join Operator ä¸­çœ‹åˆ° â€œBucketMapJoin: trueâ€</p></blockquote>
<h3 id="sort-merge-bucket-map-joinsmb-map-join"><a href="#sort-merge-bucket-map-joinsmb-map-join" class="header-anchor"></a>Sort Merge Bucket Map Join(SMB map join)
</h3><h4 id="åŸç†-3"><a href="#%e5%8e%9f%e7%90%86-3" class="header-anchor"></a>åŸç†
</h4><p>SMB Map Join åŸºäº Bucket Map Joinã€‚SMB Map Join è¦æ±‚ï¼Œå‚ä¸ join çš„è¡¨å‡ä¸ºåˆ†æ¡¶è¡¨ï¼Œä¸”éœ€ä¿è¯åˆ†æ¡¶å†…çš„æ•°æ®æ˜¯æœ‰åºçš„ï¼Œä¸”åˆ†æ¡¶å­—æ®µã€æ’åºå­—æ®µå’Œå…³è”å­—æ®µä¸ºç›¸åŒå­—æ®µï¼Œä¸”å…¶ä¸­ä¸€å¼ è¡¨çš„åˆ†æ¡¶æ•°é‡æ˜¯å¦å¤–ä¸€å¼ è¡¨åˆ†æ¡¶æ•°é‡çš„æ•´æ•°å€ã€‚</p>
<p>SMB Map Join åŒ Bucket Join ä¸€æ ·ï¼ŒåŒæ ·æ˜¯åˆ©ç”¨ä¸¤è¡¨å„åˆ†æ¡¶ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œåœ¨åˆ†æ¡¶ä¹‹é—´è¿›è¡Œ join æ“ä½œï¼Œä¸åŒçš„æ˜¯ï¼Œåˆ†æ¡¶ä¹‹é—´çš„ join æ“ä½œçš„å®ç°åŸç†ã€‚Bucket Map Joinï¼Œä¸¤ä¸ªåˆ†æ¡¶ä¹‹é—´çš„ join å®ç°åŸç†ä¸º Hash Join ç®—æ³•ï¼›è€Œ SMB Map Joinï¼Œä¸¤ä¸ªåˆ†æ¡¶ä¹‹é—´çš„ join å®ç°åŸç†ä¸º Sort Merge Join ç®—æ³•ã€‚</p>
<p>Hash Join å’Œ Sort Merge Join å‡ä¸ºå…³ç³»å‹æ•°æ®åº“ä¸­å¸¸è§çš„ Join å®ç°ç®—æ³•ã€‚Hash Join çš„åŸç†ç›¸å¯¹ç®€å•ï¼Œå°±æ˜¯å¯¹å‚ä¸ join çš„ä¸€å¼ è¡¨æ„å»º hash tableï¼Œç„¶åæ‰«æå¦å¤–ä¸€å¼ è¡¨ï¼Œç„¶åè¿›è¡Œé€è¡ŒåŒ¹é…ã€‚Sort Merge Join éœ€è¦åœ¨ä¸¤å¼ æŒ‰ç…§å…³è”å­—æ®µæ’å¥½åºçš„è¡¨ä¸­è¿›è¡Œï¼Œå…¶åŸç†å¦‚å›¾æ‰€ç¤ºï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-18.png"
	width="1234"
	height="709"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-18_hu_cd814555b30c2367.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-18_hu_7676e8dcb67afaab.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="174"
		data-flex-basis="417px"
	
>
Hive ä¸­çš„ SMB Map Join å°±æ˜¯å¯¹ä¸¤ä¸ªåˆ†æ¡¶çš„æ•°æ®æŒ‰ç…§ä¸Šè¿°æ€è·¯è¿›è¡Œ Join æ“ä½œã€‚å¯ä»¥çœ‹å‡ºï¼ŒSMB Map Join ä¸ Bucket Map Join ç›¸æ¯”ï¼Œåœ¨è¿›è¡Œ Join æ“ä½œæ—¶ï¼ŒMap ç«¯æ˜¯æ— éœ€å¯¹æ•´ä¸ª Bucket æ„å»º hash tableï¼Œä¹Ÿæ— éœ€åœ¨ Map ç«¯ç¼“å­˜æ•´ä¸ª Bucket æ•°æ®çš„ï¼Œæ¯ä¸ª Mapper åªéœ€æŒ‰é¡ºåºé€ä¸ª key è¯»å–ä¸¤ä¸ªåˆ†æ¡¶çš„æ•°æ®è¿›è¡Œ join å³å¯ã€‚</p>
<h4 id="ä¼˜åŒ–-2"><a href="#%e4%bc%98%e5%8c%96-2" class="header-anchor"></a>ä¼˜åŒ–
</h4><p>Sort Merge Bucket Map Join æœ‰ä¸¤ç§è§¦å‘æ–¹å¼ï¼ŒåŒ…æ‹¬ Hint æç¤ºå’Œè‡ªåŠ¨è½¬æ¢ã€‚Hint æç¤ºå·²è¿‡æ—¶ï¼Œä¸æ¨èä½¿ç”¨ã€‚ä¸‹é¢æ˜¯è‡ªåŠ¨è½¬æ¢çš„ç›¸å…³å‚æ•°ï¼š</p>
<blockquote>
<p>&ndash;å¯åŠ¨ Sort Merge Bucket Map Join ä¼˜åŒ–</p>
<p>set hive.optimize.bucketmapjoin.sortedmerge=true;</p>
<p>&ndash;ä½¿ç”¨è‡ªåŠ¨è½¬æ¢ SMB Join</p>
<p>set hive.auto.convert.sortmerge.join=true;</p></blockquote>
<p>å’Œ bucket map join ä¸€æ ·ï¼Œåˆ›å»ºåˆ†æ¡¶è¡¨å¹¶å¯¼å…¥æ•°æ® ï¼Œè®¾ç½®å‚æ•°ï¼Œè¿è¡Œ HQLï¼Œç»“æœå¦‚ä¸‹ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-19.png"
	width="317"
	height="654"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-19_hu_9e5a0b4b5771431a.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-19_hu_a812c6d9b6d4878f.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="48"
		data-flex-basis="116px"
	
></p>
<h2 id="æ•°æ®å€¾æ–œä¼˜åŒ–"><a href="#%e6%95%b0%e6%8d%ae%e5%80%be%e6%96%9c%e4%bc%98%e5%8c%96" class="header-anchor"></a>æ•°æ®å€¾æ–œä¼˜åŒ–
</h2><p>æ•°æ®å€¾æ–œé—®é¢˜ï¼Œé€šå¸¸æ˜¯æŒ‡å‚ä¸è®¡ç®—çš„æ•°æ®åˆ†å¸ƒä¸å‡ï¼Œå³æŸä¸ª key æˆ–è€…æŸäº› key çš„æ•°æ®é‡è¿œè¶…å…¶ä»– keyï¼Œå¯¼è‡´åœ¨ shuffle é˜¶æ®µï¼Œå¤§é‡ç›¸åŒ key çš„æ•°æ®è¢«å‘å¾€åŒä¸€ä¸ª Reduceï¼Œè¿›è€Œå¯¼è‡´è¯¥ Reduce æ‰€éœ€çš„æ—¶é—´è¿œè¶…å…¶ä»– Reduceï¼Œæˆä¸ºæ•´ä¸ªä»»åŠ¡çš„ç“¶é¢ˆã€‚</p>
<p>Hive ä¸­çš„æ•°æ®å€¾æ–œå¸¸å‡ºç°åœ¨åˆ†ç»„èšåˆå’Œ join æ“ä½œçš„åœºæ™¯ä¸­ï¼Œä¸‹é¢åˆ†åˆ«ä»‹ç»åœ¨ä¸Šè¿°ä¸¤ç§åœºæ™¯ä¸‹çš„ä¼˜åŒ–æ€è·¯ã€‚</p>
<h3 id="åˆ†ç»„èšåˆå¯¼è‡´çš„æ•°æ®å€¾æ–œ"><a href="#%e5%88%86%e7%bb%84%e8%81%9a%e5%90%88%e5%af%bc%e8%87%b4%e7%9a%84%e6%95%b0%e6%8d%ae%e5%80%be%e6%96%9c" class="header-anchor"></a>åˆ†ç»„èšåˆå¯¼è‡´çš„æ•°æ®å€¾æ–œ
</h3><p>Hive ä¸­æœªç»ä¼˜åŒ–çš„åˆ†ç»„èšåˆï¼Œæ˜¯é€šè¿‡ä¸€ä¸ª MapReduce Job å®ç°çš„ã€‚Map ç«¯è´Ÿè´£è¯»å–æ•°æ®ï¼Œå¹¶æŒ‰ç…§åˆ†ç»„å­—æ®µåˆ†åŒºï¼Œé€šè¿‡ Shuffleï¼Œå°†æ•°æ®å‘å¾€ Reduce ç«¯ï¼Œå„ç»„æ•°æ®åœ¨ Reduce ç«¯å®Œæˆæœ€ç»ˆçš„èšåˆè¿ç®—ã€‚</p>
<p>å¦‚æœ group by åˆ†ç»„å­—æ®µçš„å€¼åˆ†å¸ƒä¸å‡ï¼Œå°±å¯èƒ½å¯¼è‡´å¤§é‡ç›¸åŒçš„ key è¿›å…¥åŒä¸€ Reduceï¼Œä»è€Œå¯¼è‡´æ•°æ®å€¾æ–œé—®é¢˜ã€‚</p>
<p>ç”±åˆ†ç»„èšåˆå¯¼è‡´çš„æ•°æ®å€¾æ–œé—®é¢˜ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ€è·¯ï¼š</p>
<h4 id="map-side-èšåˆ"><a href="#map-side-%e8%81%9a%e5%90%88" class="header-anchor"></a>Map-Side èšåˆ
</h4><p>å‰æ–‡æè¿‡ï¼Œæ­¤å¤„ç•¥è¿‡</p>
<h4 id="skew-groupby-ä¼˜åŒ–"><a href="#skew-groupby-%e4%bc%98%e5%8c%96" class="header-anchor"></a>Skew-GroupBy ä¼˜åŒ–
</h4><p>åŸç†æ˜¯å¯åŠ¨ä¸¤ä¸ª MR ä»»åŠ¡ï¼Œç¬¬ä¸€ä¸ª MR æŒ‰ç…§éšæœºæ•°åˆ†åŒºï¼Œå°†æ•°æ®åˆ†æ•£å‘é€åˆ° Reduceï¼Œå®Œæˆéƒ¨åˆ†èšåˆï¼Œç¬¬äºŒä¸ª MR æŠŠæ‰“æ•£çš„æ•°æ®æŒ‰ç…§åˆ†ç»„å­—æ®µåˆ†åŒºï¼Œå®Œæˆæœ€ç»ˆèšåˆã€‚</p>
<h5 id="ä¼˜åŒ–å‰"><a href="#%e4%bc%98%e5%8c%96%e5%89%8d" class="header-anchor"></a>ä¼˜åŒ–å‰
</h5><p>è¯¥è¡¨æ•°æ®ä¸­çš„ province_id å­—æ®µæ˜¯å­˜åœ¨å€¾æ–œçš„ï¼Œè‹¥ä¸ç»è¿‡ä¼˜åŒ–ï¼Œé€šè¿‡è§‚å¯Ÿä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯èƒ½å¤Ÿçœ‹å‡ºæ•°æ®å€¾æ–œç°è±¡çš„ã€‚
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-20.png"
	width="869"
	height="245"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-20_hu_4c7b5ee5d955b18c.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-20_hu_4bd4157092ae801d.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="354"
		data-flex-basis="851px"
	
></p>
<h5 id="ä¼˜åŒ–å"><a href="#%e4%bc%98%e5%8c%96%e5%90%8e" class="header-anchor"></a>ä¼˜åŒ–å
</h5><blockquote>
<p>&ndash;å¯ç”¨ skew-groupby</p>
<p>set hive.groupby.skewindata=true;</p>
<p>&ndash;å…³é—­ map-side èšåˆï¼ˆmap side èšåˆé»˜è®¤æ˜¯å¼€å¯çš„ï¼‰</p>
<p>set hive.map.aggr=false;</p>
<p>å¼€å¯ Skew-GroupBy ä¼˜åŒ–åï¼Œå¯ä»¥å¾ˆæ˜æ˜¾çœ‹åˆ°è¯¥ sql æ‰§è¡Œåœ¨ yarn ä¸Šå¯åŠ¨äº†ä¸¤ä¸ª mr ä»»åŠ¡ï¼Œç¬¬ä¸€ä¸ª mr æ‰“æ•£æ•°æ®ï¼Œç¬¬äºŒä¸ª mr æŠŠæ‰“æ•£åçš„æ•°æ®è¿›è¡Œåˆ†ç»„èšåˆã€‚
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-21.png"
	width="869"
	height="204"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-21_hu_a9f85e157a440921.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-21_hu_41134c8a7aa5bf1f.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="425"
		data-flex-basis="1022px"
	
></p></blockquote>
<h3 id="join-å¯¼è‡´çš„æ•°æ®å€¾æ–œ"><a href="#join-%e5%af%bc%e8%87%b4%e7%9a%84%e6%95%b0%e6%8d%ae%e5%80%be%e6%96%9c" class="header-anchor"></a>Join å¯¼è‡´çš„æ•°æ®å€¾æ–œ
</h3><p>æœªç»ä¼˜åŒ–çš„ join æ“ä½œï¼Œé»˜è®¤æ˜¯ä½¿ç”¨ common join ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸€ä¸ª MapReduce Job å®Œæˆè®¡ç®—ã€‚Map ç«¯è´Ÿè´£è¯»å– join æ“ä½œæ‰€éœ€è¡¨çš„æ•°æ®ï¼Œå¹¶æŒ‰ç…§å…³è”å­—æ®µè¿›è¡Œåˆ†åŒºï¼Œé€šè¿‡ Shuffleï¼Œå°†å…¶å‘é€åˆ° Reduce ç«¯ï¼Œç›¸åŒ key çš„æ•°æ®åœ¨ Reduce ç«¯å®Œæˆæœ€ç»ˆçš„ Join æ“ä½œã€‚</p>
<p>å¦‚æœå…³è”å­—æ®µçš„å€¼åˆ†å¸ƒä¸å‡ï¼Œå°±å¯èƒ½å¯¼è‡´å¤§é‡ç›¸åŒçš„ key è¿›å…¥åŒä¸€ Reduceï¼Œä»è€Œå¯¼è‡´æ•°æ®å€¾æ–œé—®é¢˜ã€‚ç”± join å¯¼è‡´çš„æ•°æ®å€¾æ–œé—®é¢˜ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<h4 id="map-join-1"><a href="#map-join-1" class="header-anchor"></a>map join
</h4><p>ç•¥è¿‡</p>
<h4 id="skew-join"><a href="#skew-join" class="header-anchor"></a>skew join
</h4><p>åŸç†æ˜¯ä¸ºå€¾æ–œçš„å¤§ key å•ç‹¬å¯åŠ¨ä¸€ä¸ª map join ä»»åŠ¡è¿›è¡Œè®¡ç®—ï¼Œå…¶ä½™ key è¿›è¡Œæ­£å¸¸çš„ common joinã€‚åŸç†å›¾å¦‚ä¸‹ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-22.png"
	width="865"
	height="453"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-22_hu_56fdabed3e095d99.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-22_hu_ce6b8a273fee43e9.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="190"
		data-flex-basis="458px"
	
></p>
<blockquote>
<p>&ndash;å¯ç”¨ skew join ä¼˜åŒ–</p>
<p>set hive.optimize.skewjoin=true;</p>
<p>&ndash;è§¦å‘ skew join çš„é˜ˆå€¼ï¼Œè‹¥æŸä¸ª key çš„è¡Œæ•°è¶…è¿‡è¯¥å‚æ•°å€¼ï¼Œåˆ™è§¦å‘</p>
<p>set hive.skewjoin.key=100000;</p></blockquote>
<p>è¿™ç§æ–¹æ¡ˆå¯¹å‚ä¸ join çš„æºè¡¨å¤§å°æ²¡æœ‰è¦æ±‚ï¼Œä½†æ˜¯å¯¹ä¸¤è¡¨ä¸­å€¾æ–œçš„ key çš„æ•°æ®é‡æœ‰è¦æ±‚ï¼Œè¦æ±‚ä¸€å¼ è¡¨ä¸­çš„å€¾æ–œ key çš„æ•°æ®é‡æ¯”è¾ƒå°ï¼ˆæ–¹ä¾¿èµ° map joinï¼‰ã€‚</p>
<h2 id="ä»»åŠ¡å¹¶è¡Œåº¦ä¼˜åŒ–"><a href="#%e4%bb%bb%e5%8a%a1%e5%b9%b6%e8%a1%8c%e5%ba%a6%e4%bc%98%e5%8c%96" class="header-anchor"></a>ä»»åŠ¡å¹¶è¡Œåº¦ä¼˜åŒ–
</h2><p>Hive çš„è®¡ç®—ä»»åŠ¡ç”± MapReduce å®Œæˆï¼Œæ•…å¹¶è¡Œåº¦çš„è°ƒæ•´éœ€è¦åˆ†ä¸º Map ç«¯å’Œ Reduce ç«¯ã€‚</p>
<h3 id="map-ç«¯å¹¶è¡Œåº¦"><a href="#map-%e7%ab%af%e5%b9%b6%e8%a1%8c%e5%ba%a6" class="header-anchor"></a>Map ç«¯å¹¶è¡Œåº¦
</h3><p>Map ç«¯çš„å¹¶è¡Œåº¦ï¼Œä¹Ÿå°±æ˜¯ Map çš„ä¸ªæ•°ã€‚æ˜¯ç”±è¾“å…¥æ–‡ä»¶çš„åˆ‡ç‰‡æ•°å†³å®šçš„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒMap ç«¯çš„å¹¶è¡Œåº¦æ— éœ€æ‰‹åŠ¨è°ƒæ•´ã€‚</p>
<p>ä»¥ä¸‹ç‰¹æ®Šæƒ…å†µå¯è€ƒè™‘è°ƒæ•´ map ç«¯å¹¶è¡Œåº¦ï¼š
<strong>1ï¼‰æŸ¥è¯¢çš„è¡¨ä¸­å­˜åœ¨å¤§é‡å°æ–‡ä»¶</strong></p>
<p>æŒ‰ç…§ Hadoop é»˜è®¤çš„åˆ‡ç‰‡ç­–ç•¥ï¼Œä¸€ä¸ªå°æ–‡ä»¶ä¼šå•ç‹¬å¯åŠ¨ä¸€ä¸ª map task è´Ÿè´£è®¡ç®—ã€‚è‹¥æŸ¥è¯¢çš„è¡¨ä¸­å­˜åœ¨å¤§é‡å°æ–‡ä»¶ï¼Œåˆ™ä¼šå¯åŠ¨å¤§é‡ map taskï¼Œé€ æˆè®¡ç®—èµ„æºçš„æµªè´¹ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ Hive æä¾›çš„ CombineHiveInputFormatï¼Œå¤šä¸ªå°æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªåˆ‡ç‰‡ï¼Œä»è€Œæ§åˆ¶ map task ä¸ªæ•°ã€‚ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>set hive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat;</p></blockquote>
<p><strong>2ï¼‰map ç«¯æœ‰å¤æ‚çš„æŸ¥è¯¢é€»è¾‘</strong></p>
<p>è‹¥ SQL è¯­å¥ä¸­æœ‰æ­£åˆ™æ›¿æ¢ã€json è§£æç­‰å¤æ‚è€—æ—¶çš„æŸ¥è¯¢é€»è¾‘æ—¶ï¼Œmap ç«¯çš„è®¡ç®—ä¼šç›¸å¯¹æ…¢ä¸€äº›ã€‚è‹¥æƒ³åŠ å¿«è®¡ç®—é€Ÿåº¦ï¼Œåœ¨è®¡ç®—èµ„æºå……è¶³çš„æƒ…å†µä¸‹ï¼Œå¯è€ƒè™‘å¢å¤§ map ç«¯çš„å¹¶è¡Œåº¦ï¼Œä»¤ map task å¤šä¸€äº›ï¼Œæ¯ä¸ª map task è®¡ç®—çš„æ•°æ®å°‘ä¸€äº›ã€‚ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>&ndash;ä¸€ä¸ªåˆ‡ç‰‡çš„æœ€å¤§å€¼</p>
<p>set mapreduce.input.fileinputformat.split.maxsize=256000000;</p></blockquote>
<h3 id="reduce-ç«¯å¹¶è¡Œåº¦"><a href="#reduce-%e7%ab%af%e5%b9%b6%e8%a1%8c%e5%ba%a6" class="header-anchor"></a>Reduce ç«¯å¹¶è¡Œåº¦
</h3><p>Reduce ç«¯çš„å¹¶è¡Œåº¦ï¼Œå¯ç”±ç”¨æˆ·è‡ªå·±æŒ‡å®šï¼Œä¹Ÿå¯ç”± Hive è‡ªè¡Œæ ¹æ®è¯¥ MR Job è¾“å…¥çš„æ–‡ä»¶å¤§å°è¿›è¡Œä¼°ç®—ã€‚</p>
<blockquote>
<p>Reduce ç«¯çš„å¹¶è¡Œåº¦çš„ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<p>&ndash;æŒ‡å®š Reduce ç«¯å¹¶è¡Œåº¦ï¼Œé»˜è®¤å€¼ä¸º-1ï¼Œè¡¨ç¤ºç”¨æˆ·æœªæŒ‡å®š</p>
<p>set mapreduce.job.reduces;</p>
<p>&ndash;Reduce ç«¯å¹¶è¡Œåº¦æœ€å¤§å€¼</p>
<p>set hive.exec.reducers.max;</p>
<p>&ndash;å•ä¸ª Reduce Task è®¡ç®—çš„æ•°æ®é‡ï¼Œç”¨äºä¼°ç®— Reduce å¹¶è¡Œåº¦</p>
<p>set hive.exec.reducers.bytes.per.reducer;</p></blockquote>
<p>Reduce ç«¯å¹¶è¡Œåº¦çš„ç¡®å®šé€»è¾‘å¦‚ä¸‹ï¼š</p>
<p>è‹¥æŒ‡å®šå‚æ•° mapreduce.job.reduces çš„å€¼ä¸ºä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œåˆ™ Reduce å¹¶è¡Œåº¦ä¸ºæŒ‡å®šå€¼ã€‚å¦åˆ™ï¼ŒHive è‡ªè¡Œä¼°ç®— Reduce å¹¶è¡Œåº¦ï¼Œä¼°ç®—é€»è¾‘å¦‚ä¸‹ï¼š</p>
<p>å‡è®¾ Job è¾“å…¥çš„æ–‡ä»¶å¤§å°ä¸º totalInputBytes</p>
<p>å‚æ•° hive.exec.reducers.bytes.per.reducer çš„å€¼ä¸º bytesPerReducerã€‚</p>
<p>å‚æ•° hive.exec.reducers.max çš„å€¼ä¸º maxReducersã€‚</p>
<p>åˆ™ Reduce ç«¯çš„å¹¶è¡Œåº¦ä¸ºï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-23.png"
	width="638"
	height="98"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-23_hu_21010bf6e8750fb7.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-23_hu_4938c6195bbe484e.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="651"
		data-flex-basis="1562px"
	
></p>
<p>æ ¹æ®ä¸Šè¿°æè¿°ï¼Œå¯ä»¥çœ‹å‡ºï¼ŒHive è‡ªè¡Œä¼°ç®— Reduce å¹¶è¡Œåº¦æ—¶ï¼Œæ˜¯ä»¥æ•´ä¸ª MR Job è¾“å…¥çš„æ–‡ä»¶å¤§å°ä½œä¸ºä¾æ®çš„ã€‚å› æ­¤ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å…¶ä¼°è®¡çš„å¹¶è¡Œåº¦å¾ˆå¯èƒ½å¹¶ä¸å‡†ç¡®ï¼Œæ­¤æ—¶å°±éœ€è¦ç”¨æˆ·æ ¹æ®å®é™…æƒ…å†µæ¥æŒ‡å®š Reduce å¹¶è¡Œåº¦äº†ã€‚</p>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯ä¼šè¿›è¡Œ map-side èšåˆçš„ï¼Œä¹Ÿå°±æ˜¯ Reduce ç«¯æ¥æ”¶çš„æ•°æ®ï¼Œå®é™…ä¸Šæ˜¯ map ç«¯å®Œæˆèšåˆä¹‹åçš„ç»“æœã€‚è§‚å¯Ÿä»»åŠ¡çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä¼šå‘ç°ï¼Œæ¯ä¸ª map ç«¯è¾“å‡ºçš„æ•°æ®åªæœ‰ 34 æ¡è®°å½•ï¼Œå…±æœ‰ 5 ä¸ª map taskã€‚
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-24.png"
	width="869"
	height="374"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-24_hu_f3c3a8909f90ec92.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-24_hu_8d200be734c58711.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="232"
		data-flex-basis="557px"
	
>
ä¹Ÿå°±æ˜¯è¯´ Reduce ç«¯å®é™…åªä¼šæ¥æ”¶ 170ï¼ˆ34*5ï¼‰æ¡è®°å½•ï¼Œæ•…ç†è®ºä¸Š Reduce ç«¯å¹¶è¡Œåº¦è®¾ç½®ä¸º 1 å°±è¶³å¤Ÿäº†ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨æˆ·å¯é€šè¿‡ä»¥ä¸‹å‚æ•°ï¼Œè‡ªè¡Œè®¾ç½® Reduce ç«¯å¹¶è¡Œåº¦ä¸º 1ï¼Œè¿™æ ·æŠŠ 5 ä¸ªæ–‡ä»¶åˆå¹¶ä¸ºåªè¾“å‡º 1 ä¸ªæ–‡ä»¶ã€‚</p>
<blockquote>
<p>&ndash;æŒ‡å®š Reduce ç«¯å¹¶è¡Œåº¦ï¼Œé»˜è®¤å€¼ä¸º-1ï¼Œè¡¨ç¤ºç”¨æˆ·æœªæŒ‡å®š</p>
<p>set mapreduce.job.reduces=1;</p></blockquote>
<h2 id="å°æ–‡ä»¶åˆå¹¶ä¼˜åŒ–"><a href="#%e5%b0%8f%e6%96%87%e4%bb%b6%e5%90%88%e5%b9%b6%e4%bc%98%e5%8c%96" class="header-anchor"></a>å°æ–‡ä»¶åˆå¹¶ä¼˜åŒ–
</h2><p>Map ç«¯è¾“å…¥çš„å°æ–‡ä»¶åˆå¹¶ï¼Œå’Œ Reduce ç«¯è¾“å‡ºçš„å°æ–‡ä»¶åˆå¹¶ã€‚</p>
<h3 id="åˆå¹¶-map-ç«¯è¾“å…¥çš„å°æ–‡ä»¶"><a href="#%e5%90%88%e5%b9%b6-map-%e7%ab%af%e8%be%93%e5%85%a5%e7%9a%84%e5%b0%8f%e6%96%87%e4%bb%b6" class="header-anchor"></a>åˆå¹¶ Map ç«¯è¾“å…¥çš„å°æ–‡ä»¶
</h3><p>å°†å¤šä¸ªå°æ–‡ä»¶åˆ’åˆ†åˆ°ä¸€ä¸ªåˆ‡ç‰‡ä¸­ï¼Œè¿›è€Œç”±ä¸€ä¸ª Map Task å»å¤„ç†ã€‚ç›®çš„æ˜¯é˜²æ­¢ä¸ºå•ä¸ªå°æ–‡ä»¶å¯åŠ¨ä¸€ä¸ª Map Taskï¼Œæµªè´¹è®¡ç®—èµ„æºã€‚</p>
<blockquote>
<p>ç›¸å…³å‚æ•°ä¸ºï¼š</p>
<p>&ndash;å¯å°†å¤šä¸ªå°æ–‡ä»¶åˆ‡ç‰‡ï¼Œåˆå¹¶ä¸ºä¸€ä¸ªåˆ‡ç‰‡ï¼Œè¿›è€Œç”±ä¸€ä¸ª map ä»»åŠ¡å¤„ç†ï¼ˆé»˜è®¤ï¼‰
set hive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat;</p></blockquote>
<h3 id="åˆå¹¶-reduce-ç«¯è¾“å‡ºçš„å°æ–‡ä»¶"><a href="#%e5%90%88%e5%b9%b6-reduce-%e7%ab%af%e8%be%93%e5%87%ba%e7%9a%84%e5%b0%8f%e6%96%87%e4%bb%b6" class="header-anchor"></a>åˆå¹¶ Reduce ç«¯è¾“å‡ºçš„å°æ–‡ä»¶
</h3><p>å°†å¤šä¸ªå°æ–‡ä»¶åˆå¹¶æˆå¤§æ–‡ä»¶ã€‚ç›®çš„æ˜¯å‡å°‘ HDFS å°æ–‡ä»¶æ•°é‡ã€‚å…¶åŸç†æ˜¯æ ¹æ®è®¡ç®—ä»»åŠ¡è¾“å‡ºæ–‡ä»¶çš„å¹³å‡å¤§å°è¿›è¡Œåˆ¤æ–­ï¼Œè‹¥ç¬¦åˆæ¡ä»¶ï¼Œåˆ™å•ç‹¬å¯åŠ¨ 1 ä¸ªé¢å¤–çš„ä»»åŠ¡è¿›è¡Œåˆå¹¶ã€‚</p>
<blockquote>
<p>ç›¸å…³å‚æ•°ä¸ºï¼š</p>
<p>&ndash;å¼€å¯åˆå¹¶ map only ä»»åŠ¡è¾“å‡ºçš„å°æ–‡ä»¶ï¼Œé»˜è®¤ false</p>
<p>set hive.merge.mapfiles=true;</p>
<p>&ndash;å¼€å¯åˆå¹¶ map reduce ä»»åŠ¡è¾“å‡ºçš„å°æ–‡ä»¶ï¼Œé»˜è®¤ false</p>
<p>set hive.merge.mapredfiles=true;</p>
<p>&ndash;åˆå¹¶åçš„æ–‡ä»¶å¤§å°</p>
<p>set hive.merge.size.per.task=256000000;</p>
<p>&ndash;è§¦å‘å°æ–‡ä»¶åˆå¹¶ä»»åŠ¡çš„é˜ˆå€¼ï¼Œè‹¥æŸè®¡ç®—ä»»åŠ¡è¾“å‡ºçš„æ–‡ä»¶å¹³å‡å¤§å°ä½äºè¯¥å€¼ï¼Œåˆ™è§¦å‘åˆå¹¶</p>
<p>set hive.merge.smallfiles.avgsize=16000000;</p></blockquote>
<p>è‹¥ reduce ç«¯è®¾ç½®å¹¶è¡Œåº¦ä¸º 5ï¼Œåˆ™è¾“å‡º 5 ä¸ªæ–‡ä»¶ã€‚ä¸‹å›¾ä¸ºè¾“å‡ºæ–‡ä»¶ï¼Œå¯ä»¥çœ‹å‡ºï¼Œ5 ä¸ªå‡ä¸ºå°æ–‡ä»¶ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-25.png"
	width="869"
	height="379"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-25_hu_87c8501899639239.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-25_hu_19398f78240c4efd.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="229"
		data-flex-basis="550px"
	
>
è¦é¿å… 5 ä¸ªå°æ–‡ä»¶äº§ç”Ÿï¼Œå¯ä»¥è®¾ç½® reduce ç«¯å¹¶è¡Œåº¦ä¸º 1ï¼Œæœ‰å‡ ä¸ª reduce å¹¶è¡Œå°±æœ‰å‡ ä¸ªæ–‡ä»¶äº§ç”Ÿï¼Œä¿è¯å…¶è¾“å‡ºç»“æœåªæœ‰ä¸€ä¸ªæ–‡ä»¶æˆ–å¯ç”¨ hive åˆå¹¶å°æ–‡ä»¶ä¼˜åŒ–ã€‚</p>
<p><strong>å¯ç”¨ Hive åˆå¹¶å°æ–‡ä»¶ä¼˜åŒ–</strong></p>
<blockquote>
<p>è®¾ç½®ä»¥ä¸‹å‚æ•°ï¼š</p>
<p>&ndash;å¼€å¯åˆå¹¶ map reduce ä»»åŠ¡è¾“å‡ºçš„å°æ–‡ä»¶</p>
<p>set hive.merge.mapredfiles=true;</p>
<p>&ndash;åˆå¹¶åçš„æ–‡ä»¶å¤§å°</p>
<p>set hive.merge.size.per.task=256000000;</p>
<p>&ndash;è§¦å‘å°æ–‡ä»¶åˆå¹¶ä»»åŠ¡çš„é˜ˆå€¼ï¼Œè‹¥æŸè®¡ç®—ä»»åŠ¡è¾“å‡ºçš„æ–‡ä»¶å¹³å‡å¤§å°ä½äºè¯¥å€¼ï¼Œåˆ™è§¦å‘åˆå¹¶</p>
<p>set hive.merge.smallfiles.avgsize=16000000;</p></blockquote>
<p>è¿™æ ·è¾“å‡ºæ–‡ä»¶å°±åˆå¹¶ä¸ºä¸€ä¸ªäº†
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-26.png"
	width="869"
	height="303"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-26_hu_7e0b9aa0a00b8312.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-26_hu_3d9e91230e8317b1.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="286"
		data-flex-basis="688px"
	
></p>
<h2 id="å…¶ä»–ä¼˜åŒ–"><a href="#%e5%85%b6%e4%bb%96%e4%bc%98%e5%8c%96" class="header-anchor"></a>å…¶ä»–ä¼˜åŒ–
</h2><h3 id="cbo-ä¼˜åŒ–"><a href="#cbo-%e4%bc%98%e5%8c%96" class="header-anchor"></a>CBO ä¼˜åŒ–
</h3><p>CBO æ˜¯æŒ‡ Cost based Optimizerï¼Œå³åŸºäºè®¡ç®—æˆæœ¬çš„ä¼˜åŒ–ã€‚</p>
<p>åœ¨ Hive ä¸­ï¼Œè®¡ç®—æˆæœ¬æ¨¡å‹è€ƒè™‘åˆ°äº†ï¼šæ•°æ®çš„è¡Œæ•°ã€CPUã€æœ¬åœ° IOã€HDFS IOã€ç½‘ç»œ IO ç­‰æ–¹é¢ã€‚Hive ä¼šè®¡ç®—åŒä¸€ SQL è¯­å¥çš„ä¸åŒæ‰§è¡Œè®¡åˆ’çš„è®¡ç®—æˆæœ¬ï¼Œå¹¶é€‰å‡ºæˆæœ¬æœ€ä½çš„æ‰§è¡Œè®¡åˆ’ã€‚ç›®å‰ CBO åœ¨ hive çš„ MR å¼•æ“ä¸‹ä¸»è¦ç”¨äº join çš„ä¼˜åŒ–ï¼Œä¾‹å¦‚å¤šè¡¨ join çš„ join é¡ºåºã€‚</p>
<blockquote>
<p>ç›¸å…³å‚æ•°ä¸ºï¼š</p>
<p>&ndash;æ˜¯å¦å¯ç”¨ cbo ä¼˜åŒ–</p>
<p>set hive.cbo.enable=true;</p></blockquote>
<blockquote>
<p>1ï¼‰ç¤ºä¾‹ HQL</p>
<p>hive (default)&gt; select * from order_detail od</p>
<p>join product_info product on od.product_id=product.id</p>
<p>join province_info province on od.province_id=province.id;</p>
<p>2ï¼‰å…³é—­ CBO ä¼˜åŒ–</p>
<p>&ndash;å…³é—­ cbo ä¼˜åŒ–</p>
<p>set hive.cbo.enable=false;</p>
<p>&ndash;ä¸ºäº†æµ‹è¯•æ•ˆæœæ›´åŠ ç›´è§‚ï¼Œå…³é—­ map join è‡ªåŠ¨è½¬æ¢</p>
<p>set hive.auto.convert.join=false;</p></blockquote>
<p>æ ¹æ®æ‰§è¡Œè®¡åˆ’ï¼Œå¯ä»¥çœ‹å‡ºï¼Œä¸‰å¼ è¡¨çš„ join é¡ºåºå¦‚ä¸‹ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-27.png"
	width="660"
	height="294"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-27_hu_40e2f0ee95980f6.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-27_hu_1e3b627e737906da.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="224"
		data-flex-basis="538px"
	
></p>
<blockquote>
<p>3ï¼‰å¼€å¯ CBO ä¼˜åŒ–</p>
<p>&ndash;å¼€å¯ cbo ä¼˜åŒ–</p>
<p>set hive.cbo.enable=true;</p>
<p>&ndash;ä¸ºäº†æµ‹è¯•æ•ˆæœæ›´åŠ ç›´è§‚ï¼Œå…³é—­ map join è‡ªåŠ¨è½¬æ¢</p>
<p>set hive.auto.convert.join=false;</p></blockquote>
<p>æ ¹æ®æ‰§è¡Œè®¡åˆ’ï¼Œå¯ä»¥çœ‹å‡ºï¼Œä¸‰å¼ è¡¨çš„ join é¡ºåºå¦‚ä¸‹ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-28.png"
	width="669"
	height="298"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-28_hu_7ceeab9ab8aa26e.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-28_hu_45dd3c1250222a77.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="224"
		data-flex-basis="538px"
	
>
CBO ä¼˜åŒ–å¯¹äºæ‰§è¡Œè®¡åˆ’ä¸­ join é¡ºåºæ˜¯æœ‰å½±å“çš„ï¼Œå…¶ä¹‹æ‰€ä»¥ä¼šå°† province_info çš„ join é¡ºåºæå‰ï¼Œæ˜¯å› ä¸º province info çš„æ•°æ®é‡è¾ƒå°ï¼Œå°†å…¶æå‰ï¼Œä¼šæœ‰æ›´å¤§çš„æ¦‚ç‡ä½¿å¾—ä¸­é—´ç»“æœçš„æ•°æ®é‡å˜å°ï¼Œä»è€Œä½¿æ•´ä¸ªè®¡ç®—ä»»åŠ¡çš„æ•°æ®é‡å‡å°ï¼Œä¹Ÿå°±æ˜¯ä½¿è®¡ç®—æˆæœ¬å˜å°ã€‚</p>
<h3 id="è°“è¯ä¸‹æ¨"><a href="#%e8%b0%93%e8%af%8d%e4%b8%8b%e6%8e%a8" class="header-anchor"></a>è°“è¯ä¸‹æ¨
</h3><p>è°“è¯ä¸‹æ¨ï¼ˆpredicate pushdownï¼‰æ˜¯æŒ‡ï¼Œå°½é‡å°†è¿‡æ»¤æ“ä½œå‰ç§»ï¼Œä»¥å‡å°‘åç»­è®¡ç®—æ­¥éª¤çš„æ•°æ®é‡ã€‚</p>
<blockquote>
<p>ç›¸å…³å‚æ•°ä¸ºï¼š</p>
<p>&ndash;æ˜¯å¦å¯åŠ¨è°“è¯ä¸‹æ¨ï¼ˆpredicate pushdownï¼‰ä¼˜åŒ–</p>
<p>set hive.optimize.ppd = true;</p></blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šCBO ä¼˜åŒ–ä¹Ÿä¼šå®Œæˆä¸€éƒ¨åˆ†çš„è°“è¯ä¸‹æ¨ä¼˜åŒ–å·¥ä½œï¼Œå› ä¸ºåœ¨æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œè°“è¯è¶Šé å‰ï¼Œæ•´ä¸ªè®¡åˆ’çš„è®¡ç®—æˆæœ¬å°±ä¼šè¶Šä½ã€‚
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-29.png"
	width="684"
	height="568"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-29_hu_e70a14f380e3cc42.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-29_hu_87d64db6b104c96b.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="120"
		data-flex-basis="289px"
	
></p>
<h3 id="çŸ¢é‡åŒ–æŸ¥è¯¢"><a href="#%e7%9f%a2%e9%87%8f%e5%8c%96%e6%9f%a5%e8%af%a2" class="header-anchor"></a>çŸ¢é‡åŒ–æŸ¥è¯¢
</h3><p>Hive çš„çŸ¢é‡åŒ–æŸ¥è¯¢ä¼˜åŒ–ï¼Œä¾èµ–äº CPU çš„çŸ¢é‡åŒ–è®¡ç®—ï¼ŒCPU çš„çŸ¢é‡åŒ–è®¡ç®—çš„åŸºæœ¬åŸç†å¦‚ä¸‹å›¾ï¼š
<img src="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-30.png"
	width="960"
	height="540"
	srcset="/zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-30_hu_e362fffa2298c231.png 480w, /zh-cn/post/2024/04/hive%E8%B0%83%E4%BC%98/image-30_hu_aeb22a57936a7ac0.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="177"
		data-flex-basis="426px"
	
></p>
<blockquote>
<p>ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<p>set hive.vectorized.execution.enabled=true;</p>
<p>è‹¥æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œå‡ºç°â€œExecution mode: vectorizedâ€å­—æ ·ï¼Œå³è¡¨æ˜ä½¿ç”¨äº†çŸ¢é‡åŒ–è®¡ç®—ã€‚</p></blockquote>
<h3 id="fetch-æŠ“å–"><a href="#fetch-%e6%8a%93%e5%8f%96" class="header-anchor"></a>Fetch æŠ“å–
</h3><p>Fetch æŠ“å–æ˜¯æŒ‡ï¼ŒHive ä¸­å¯¹æŸäº›æƒ…å†µçš„æŸ¥è¯¢å¯ä»¥ä¸å¿…ä½¿ç”¨ MapReduce è®¡ç®—ã€‚ä¾‹å¦‚ï¼šselect * from emp;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒHive å¯ä»¥ç®€å•åœ°è¯»å– emp å¯¹åº”çš„å­˜å‚¨ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç„¶åè¾“å‡ºæŸ¥è¯¢ç»“æœåˆ°æ§åˆ¶å°ã€‚</p>
<blockquote>
<p>ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<p>&ndash;æ˜¯å¦åœ¨ç‰¹å®šåœºæ™¯è½¬æ¢ä¸º fetch ä»»åŠ¡</p>
<p>&ndash;è®¾ç½®ä¸º none è¡¨ç¤ºä¸è½¬æ¢</p>
<p>&ndash;è®¾ç½®ä¸º minimal è¡¨ç¤ºæ”¯æŒ select *ï¼Œåˆ†åŒºå­—æ®µè¿‡æ»¤ï¼ŒLimit ç­‰</p>
<p>&ndash;è®¾ç½®ä¸º more è¡¨ç¤ºæ”¯æŒ select ä»»æ„å­—æ®µ,åŒ…æ‹¬å‡½æ•°ï¼Œè¿‡æ»¤ï¼Œå’Œ limit ç­‰</p>
<p>set hive.fetch.task.conversion=more;</p></blockquote>
<h3 id="æœ¬åœ°æ¨¡å¼"><a href="#%e6%9c%ac%e5%9c%b0%e6%a8%a1%e5%bc%8f" class="header-anchor"></a>æœ¬åœ°æ¨¡å¼
</h3><p>å¤§å¤šæ•°çš„ Hadoop Job æ˜¯éœ€è¦ Hadoop æä¾›çš„å®Œæ•´çš„å¯æ‰©å±•æ€§æ¥å¤„ç†å¤§æ•°æ®é›†çš„ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶ Hive çš„è¾“å…¥æ•°æ®é‡æ˜¯éå¸¸å°çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºæŸ¥è¯¢è§¦å‘æ‰§è¡Œä»»åŠ¡æ¶ˆè€—çš„æ—¶é—´å¯èƒ½ä¼šæ¯”å®é™… job çš„æ‰§è¡Œæ—¶é—´è¦å¤šçš„å¤šã€‚å¯¹äºå¤§å¤šæ•°è¿™ç§æƒ…å†µï¼ŒHive å¯ä»¥é€šè¿‡æœ¬åœ°æ¨¡å¼åœ¨å•å°æœºå™¨ä¸Šå¤„ç†æ‰€æœ‰çš„ä»»åŠ¡ï¼Œä¸å¿…æäº¤åˆ° Yarnã€‚å¯¹äºå°æ•°æ®é›†ï¼Œæ‰§è¡Œæ—¶é—´å¯ä»¥æ˜æ˜¾è¢«ç¼©çŸ­ã€‚</p>
<blockquote>
<p>ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<p>&ndash;å¼€å¯è‡ªåŠ¨è½¬æ¢ä¸ºæœ¬åœ°æ¨¡å¼</p>
<p>set hive.exec.mode.local.auto=true;</p>
<p>&ndash;è®¾ç½® local MapReduce çš„æœ€å¤§è¾“å…¥æ•°æ®é‡ï¼Œå½“è¾“å…¥æ•°æ®é‡å°äºè¿™ä¸ªå€¼æ—¶é‡‡ç”¨ local MapReduce çš„æ–¹å¼ï¼Œé»˜è®¤ä¸º 134217728ï¼Œå³ 128M</p>
<p>set hive.exec.mode.local.auto.inputbytes.max=50000000;</p>
<p>&ndash;è®¾ç½® local MapReduce çš„æœ€å¤§è¾“å…¥æ–‡ä»¶ä¸ªæ•°ï¼Œå½“è¾“å…¥æ–‡ä»¶ä¸ªæ•°å°äºè¿™ä¸ªå€¼æ—¶é‡‡ç”¨ local MapReduce çš„æ–¹å¼ï¼Œé»˜è®¤ä¸º 4</p>
<p>set hive.exec.mode.local.auto.input.files.max=10;</p></blockquote>
<h3 id="å¹¶è¡Œæ‰§è¡Œ"><a href="#%e5%b9%b6%e8%a1%8c%e6%89%a7%e8%a1%8c" class="header-anchor"></a>å¹¶è¡Œæ‰§è¡Œ
</h3><p>Hive ä¼šå°†ä¸€ä¸ª SQL è¯­å¥è½¬åŒ–æˆä¸€ä¸ªæˆ–è€…å¤šä¸ª Stageï¼Œæ¯ä¸ª Stage å¯¹åº”ä¸€ä¸ª MR Jobã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHive åŒæ—¶åªä¼šæ‰§è¡Œä¸€ä¸ª Stageã€‚ä½†æ˜¯æŸ SQL è¯­å¥å¯èƒ½ä¼šåŒ…å«å¤šä¸ª Stageï¼Œä½†è¿™å¤šä¸ª Stage å¯èƒ½å¹¶éå®Œå…¨äº’ç›¸ä¾èµ–ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰äº› Stage æ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ã€‚æ­¤å¤„æåˆ°çš„å¹¶è¡Œæ‰§è¡Œå°±æ˜¯æŒ‡è¿™äº› Stage çš„å¹¶è¡Œæ‰§è¡Œã€‚</p>
<blockquote>
<p>ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>
<p>&ndash;å¯ç”¨å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–</p>
<p>set hive.exec.parallel=true;</p>
<p>&ndash;åŒä¸€ä¸ª sql å…è®¸æœ€å¤§å¹¶è¡Œåº¦ï¼Œé»˜è®¤ä¸º 8</p>
<p>set hive.exec.parallel.thread.number=8;</p></blockquote>
<h3 id="ä¸¥æ ¼æ¨¡å¼"><a href="#%e4%b8%a5%e6%a0%bc%e6%a8%a1%e5%bc%8f" class="header-anchor"></a>ä¸¥æ ¼æ¨¡å¼
</h3><p>Hive å¯ä»¥é€šè¿‡è®¾ç½®æŸäº›å‚æ•°é˜²æ­¢å±é™©æ“ä½œï¼š</p>
<p><strong>1ï¼‰åˆ†åŒºè¡¨ä¸ä½¿ç”¨åˆ†åŒºè¿‡æ»¤</strong></p>
<p>å°† hive.strict.checks.no.partition.filter è®¾ç½®ä¸º true æ—¶ï¼Œå¯¹äºåˆ†åŒºè¡¨ï¼Œé™¤é where è¯­å¥ä¸­å«æœ‰åˆ†åŒºå­—æ®µè¿‡æ»¤æ¡ä»¶æ¥é™åˆ¶èŒƒå›´ï¼Œå¦åˆ™ä¸å…è®¸æ‰§è¡Œã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯ç”¨æˆ·ä¸å…è®¸æ‰«ææ‰€æœ‰åˆ†åŒºã€‚è¿›è¡Œè¿™ä¸ªé™åˆ¶çš„åŸå› æ˜¯ï¼Œé€šå¸¸åˆ†åŒºè¡¨éƒ½æ‹¥æœ‰éå¸¸å¤§çš„æ•°æ®é›†ï¼Œè€Œä¸”æ•°æ®å¢åŠ è¿…é€Ÿã€‚æ²¡æœ‰è¿›è¡Œåˆ†åŒºé™åˆ¶çš„æŸ¥è¯¢å¯èƒ½ä¼šæ¶ˆè€—ä»¤äººä¸å¯æ¥å—çš„å·¨å¤§èµ„æºæ¥å¤„ç†è¿™ä¸ªè¡¨ã€‚</p>
<p><strong>2ï¼‰ä½¿ç”¨ order by æ²¡æœ‰ limit è¿‡æ»¤</strong></p>
<p>å°† hive.strict.checks.orderby.no.limit è®¾ç½®ä¸º true æ—¶ï¼Œå¯¹äºä½¿ç”¨äº† order by è¯­å¥çš„æŸ¥è¯¢ï¼Œè¦æ±‚å¿…é¡»ä½¿ç”¨ limit è¯­å¥ã€‚å› ä¸º order by ä¸ºäº†æ‰§è¡Œæ’åºè¿‡ç¨‹ä¼šå°†æ‰€æœ‰çš„ç»“æœæ•°æ®åˆ†å‘åˆ°åŒä¸€ä¸ª Reduce ä¸­è¿›è¡Œå¤„ç†ï¼Œå¼ºåˆ¶è¦æ±‚ç”¨æˆ·å¢åŠ è¿™ä¸ª limit è¯­å¥å¯ä»¥é˜²æ­¢ Reduce é¢å¤–æ‰§è¡Œå¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼ˆå¼€å¯äº† limit å¯ä»¥åœ¨æ•°æ®è¿›å…¥åˆ° Reduce ä¹‹å‰å°±å‡å°‘ä¸€éƒ¨åˆ†æ•°æ®ï¼‰ã€‚</p>
<p><strong>3ï¼‰ç¬›å¡å°”ç§¯</strong></p>
<p>å°† hive.strict.checks.cartesian.product è®¾ç½®ä¸º true æ—¶ï¼Œä¼šé™åˆ¶ç¬›å¡å°”ç§¯çš„æŸ¥è¯¢ã€‚å¯¹å…³ç³»å‹æ•°æ®åº“éå¸¸äº†è§£çš„ç”¨æˆ·å¯èƒ½æœŸæœ›åœ¨æ‰§è¡Œ JOIN æŸ¥è¯¢çš„æ—¶å€™ä¸ä½¿ç”¨ ON è¯­å¥è€Œæ˜¯ä½¿ç”¨ where è¯­å¥ï¼Œè¿™æ ·å…³ç³»æ•°æ®åº“çš„æ‰§è¡Œä¼˜åŒ–å™¨å°±å¯ä»¥é«˜æ•ˆåœ°å°† WHERE è¯­å¥è½¬åŒ–æˆé‚£ä¸ª ON è¯­å¥ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒHive å¹¶ä¸ä¼šæ‰§è¡Œè¿™ç§ä¼˜åŒ–ï¼Œå› æ­¤ï¼Œå¦‚æœè¡¨è¶³å¤Ÿå¤§ï¼Œé‚£ä¹ˆè¿™ä¸ªæŸ¥è¯¢å°±ä¼šå‡ºç°ä¸å¯æ§çš„æƒ…å†µã€‚</p>

</section>


    <footer class="article-footer">
    

    </footer>

    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

     
    
        
    <div class="disqus-container">
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hugo-theme-stack" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2025 - 
        
        2026 é’ç§‹åšå®¢
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
